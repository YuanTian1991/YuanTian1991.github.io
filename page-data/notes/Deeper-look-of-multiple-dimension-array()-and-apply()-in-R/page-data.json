{"componentChunkName":"component---src-templates-note-template-js","path":"/notes/Deeper-look-of-multiple-dimension-array()-and-apply()-in-R","result":{"data":{"markdownRemark":{"html":"<p>The thing started my wife ask me how to understand 3-dimension matrix created by <code class=\"language-text\">array()</code> function in R. We know that if there are only 2 dimentions, they are x-axis and y-axis in a plot. And in R (or any other terminal tool), it looks like rows and columns. For example, below I created a two array data. (In most case, I always call them as matrix or data.frame, maybe I have been wrong for very long time...haha)</p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\"><span class=\"token operator\">></span> d2 <span class=\"token operator\">&lt;-</span> array<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token operator\">:</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span> <span class=\"token operator\">*</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> c<span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">></span> d2\n     <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span>    <span class=\"token number\">1</span>    <span class=\"token number\">5</span>    <span class=\"token number\">9</span>   <span class=\"token number\">13</span>   <span class=\"token number\">17</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span>    <span class=\"token number\">2</span>    <span class=\"token number\">6</span>   <span class=\"token number\">10</span>   <span class=\"token number\">14</span>   <span class=\"token number\">18</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span>    <span class=\"token number\">3</span>    <span class=\"token number\">7</span>   <span class=\"token number\">11</span>   <span class=\"token number\">15</span>   <span class=\"token number\">19</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span>    <span class=\"token number\">4</span>    <span class=\"token number\">8</span>   <span class=\"token number\">12</span>   <span class=\"token number\">16</span>   <span class=\"token number\">20</span></code></pre></div>\n<p>Other functions like <code class=\"language-text\">matrix()</code>, <code class=\"language-text\">data.frame()</code> .etc can reach similar results. In short, in above example, we get a 2-dimension data structure with rows and columns. Then as we know, <code class=\"language-text\">apply()</code> function is a very nice way to quickly iterate rows or columns.</p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\"><span class=\"token operator\">></span> test <span class=\"token operator\">&lt;-</span> apply<span class=\"token punctuation\">(</span>d2<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span> print<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span>  <span class=\"token number\">1</span>  <span class=\"token number\">5</span>  <span class=\"token number\">9</span> <span class=\"token number\">13</span> <span class=\"token number\">17</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span>  <span class=\"token number\">2</span>  <span class=\"token number\">6</span> <span class=\"token number\">10</span> <span class=\"token number\">14</span> <span class=\"token number\">18</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span>  <span class=\"token number\">3</span>  <span class=\"token number\">7</span> <span class=\"token number\">11</span> <span class=\"token number\">15</span> <span class=\"token number\">19</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span>  <span class=\"token number\">4</span>  <span class=\"token number\">8</span> <span class=\"token number\">12</span> <span class=\"token number\">16</span> <span class=\"token number\">20</span>\n<span class=\"token operator\">></span>\n<span class=\"token operator\">></span> test <span class=\"token operator\">&lt;-</span> apply<span class=\"token punctuation\">(</span>d2<span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span> print<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token number\">1</span> <span class=\"token number\">2</span> <span class=\"token number\">3</span> <span class=\"token number\">4</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token number\">5</span> <span class=\"token number\">6</span> <span class=\"token number\">7</span> <span class=\"token number\">8</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span>  <span class=\"token number\">9</span> <span class=\"token number\">10</span> <span class=\"token number\">11</span> <span class=\"token number\">12</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token number\">13</span> <span class=\"token number\">14</span> <span class=\"token number\">15</span> <span class=\"token number\">16</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token number\">17</span> <span class=\"token number\">18</span> <span class=\"token number\">19</span> <span class=\"token number\">20</span>\n<span class=\"token operator\">></span></code></pre></div>\n<p>Then here comes the important part. I know many people are \"memorying\" that the second parameter in <code class=\"language-text\">apply()</code> function decided the dimention it iterates, including me before. So we all think that 1 indicates rows, and 2 indicates columns right? So there comes two vital questions: </p>\n<ul>\n<li>\n<ol>\n<li>How the second parameter works for multi-dimention arrays? If you have 3 dimension, then what the \"first\" dimension (1) iteration result will be?</li>\n</ol>\n</li>\n<li>\n<ol start=\"2\">\n<li>What will <code class=\"language-text\">apply(d2, c(1,2), function(x) print(x))</code> output?</li>\n</ol>\n</li>\n</ul>\n<hr>\n<h2>Visualisation of 3-Dimension Array</h2>\n<p>So I want to visualis the 3-Dimension array a bit. I firstly created a 3D array here. I defined a 3D array with 3 dimensions as 2, 3, 4 separately. The purposed is if dimensions have different value, it's easier for me to find which one is which.</p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\">d3 <span class=\"token operator\">&lt;-</span> array<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token operator\">:</span>c<span class=\"token punctuation\">(</span><span class=\"token number\">2</span> <span class=\"token operator\">*</span> <span class=\"token number\">3</span> <span class=\"token operator\">*</span> <span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> c<span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Then let's have a look what it looks like below. Seems we can see there are 4 matrix, that there is a <code class=\"language-text\">,,1</code> at the beginning of each, so we can guess out that the <code class=\"language-text\">,,</code> indicates 3 dimensions, and <code class=\"language-text\">,,[]</code>, the third value after the second comma indicates the third dimension. There are 4 matrixes here because previous I definded the three dimensions as <code class=\"language-text\">c(2, 3, 4)</code>. The only the third dimension have 4 elements. The first dimension should only have 2 elements, while the second dimension should only have 3 dimension.</p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\"><span class=\"token operator\">></span> d3\n<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">,</span> <span class=\"token number\">1</span>\n\n     <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span>    <span class=\"token number\">1</span>    <span class=\"token number\">3</span>    <span class=\"token number\">5</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span>    <span class=\"token number\">2</span>    <span class=\"token number\">4</span>    <span class=\"token number\">6</span>\n\n<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">,</span> <span class=\"token number\">2</span>\n\n     <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span>    <span class=\"token number\">7</span>    <span class=\"token number\">9</span>   <span class=\"token number\">11</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span>    <span class=\"token number\">8</span>   <span class=\"token number\">10</span>   <span class=\"token number\">12</span>\n\n<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">,</span> <span class=\"token number\">3</span>\n\n     <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span>   <span class=\"token number\">13</span>   <span class=\"token number\">15</span>   <span class=\"token number\">17</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span>   <span class=\"token number\">14</span>   <span class=\"token number\">16</span>   <span class=\"token number\">18</span>\n\n<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">,</span> <span class=\"token number\">4</span>\n\n     <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span>   <span class=\"token number\">19</span>   <span class=\"token number\">21</span>   <span class=\"token number\">23</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span>   <span class=\"token number\">20</span>   <span class=\"token number\">22</span>   <span class=\"token number\">24</span>\n\n<span class=\"token operator\">></span></code></pre></div>\n<p>Above is still hard for us to understand the 3D strucuture of the data. And even, later we want to see how <code class=\"language-text\">apply()</code> function works on it. So I decided to visualise it. In below figure, I just screenshort above 4 matrix, then rotated a bit via Powerpoint. Now we can clearly see the 3 dimentions. In above plot there are 3 axises, normally in 2-dimension matrixes, we normally only can see two axis (X and Y), we named them as row and column in 2-dimension. Howeverm in 3D situation, we need add one more axis (I named as Z here), which does NOT have a a name in 2D situation. That's why I can't simply call it as \"hight\" or \"tall\" or anything.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 710px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/df54fcd4d2887934fda92a1cd521b9ca/7131f/figure1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 72%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsSAAALEgHS3X78AAABqUlEQVQ4y4VUuaoCQRDcvzXxAvFAUXMDMdHE0ETEwA8w8CPcQMX7ChTxvrWkGmbpt4u+gmZ7Z6Zrq7un14LC+/0W0755J16vF06nE47HI+73u5jep299I9KHrtcrDocDzuczLpcL5vM5BoMBhsOhkHPtdrvJecut0IBf52GjhkEkIOlyuUS73RbS0WiEXq8nyh1CrYqB2+1WFNFncKvVQqFQQDgcRrlcxm63c2JYBp2dpZXxOZlMhIiElUoFyWQSfr8fsVgMmUwGjUZDSuDOyPh/CB+PB/b7vRhVVqtVpFIpIYrH4wgEAsjn81iv157G/SQkmGqxWEQoFILP5xOVkUgEpVLJQ6jhIWR9CBaZaoLBIBKJBNLptKis1+tSkq+EelErZJ0YzEZQWTQaRTabRa1Wc878q/D5fDqHqZQpU10ul0Oz2XRSdTdSk3pSZncNVqsVut2uXFquc999TdywzCK/zitD4+VlsAbJx+MxFouFZGH2PQrNS7/fh23b6HQ6mM1mMgHT6VQmhSAZp4PTQttsNr8J2Tl2lunRp0ozemYU2Sju65+CO+0P6ogTmEGWZ4kAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"3DVisual\"\n        title=\"3DVisual\"\n        src=\"/static/df54fcd4d2887934fda92a1cd521b9ca/7131f/figure1.png\"\n        srcset=\"/static/df54fcd4d2887934fda92a1cd521b9ca/63868/figure1.png 250w,\n/static/df54fcd4d2887934fda92a1cd521b9ca/0b533/figure1.png 500w,\n/static/df54fcd4d2887934fda92a1cd521b9ca/7131f/figure1.png 710w\"\n        sizes=\"(max-width: 710px) 100vw, 710px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>On very interesting thing is, I think in above figure, the 3 dimensions actually have many names in different scenarios. For example, as I labelled in above plot, <strong>name <code class=\"language-text\">X</code>, <code class=\"language-text\">Y</code>, <code class=\"language-text\">Z</code> are named by me</strong>, which means maybe for other people, they prefer to think the <code class=\"language-text\">Y</code> axis in my plot should be labelled as <code class=\"language-text\">X</code>. </p>\n<p><strong>However, in R language, it has defind the three dimensions.</strong> For example, in my plot it shows, the third dimension (<code class=\"language-text\">Z</code> axis) is the one vertical to floor. So it means, if you are selecting a 3D array by the thid dimensions (<code class=\"language-text\">Z</code> axis). You are actually selecting a horizontal slice of plate in my figure.</p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\"><span class=\"token operator\">></span> d3<span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span></code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 581px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c257d562ff3d8ddb707d49a71d6852a5/92d15/figure2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50.4%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABcSAAAXEgFnn9JSAAAB7klEQVQoz2NgQAPOzs5g2tHRkcHBwQGEGX18fBiR1cTHxwu1tbVxg9gNDQ2MmZmZYPGKigqIAk9PTzA9depUBmtrawZTU1NGd3d3FEO8vLw4gZYZAC1KDQ4OnhYXF9dQVVWlCpOPiYmBMGbMmAGm58+fz+Dv78+E5mBmoAEqTk5OYQEBAV2urq5rrKysdmlra4PwDm9v7wVJSUn+QMwGUhwZGQnRtXPnThRTgJokgC50AxpSDaQXWVhYbNPX19+pqam5zdjYGMzW0NDYB5TbU1dXt2TevHkmIH0XLlxgZOjr6wMbsnLlSgGgS+z19PSygZqmm5ubbzQ0NNwBMsTExGSLjo7ONiUlpV1Aw/cmJydvAho0CRhEsR0dHWrsQAAy4////2CvgsOqrKzMPCsra7ONjc1eIyOjraZmpptUVFQ2y8nJbdfV1d0dGhq6Iz8/f1Fvb2/5xIkTHYCGCjHgAo8ePQKHV3R0tBdQ0wZg2Oy2tLTcAYysnbGxsWsbGxt7+/v7o9rb29WA6lhg+kAuAgYXI4wNdiGyJAgEBgY6FBQULC0uLp7b3d1dNGnSJDug61Bc8/fvX8aUlBQwG0SjGIQMYBLp6ekqwNhXRXfNjh074EkJ6HIGvAAYuCiGIhnECHQtmA1MNgxCQkJ4zQEAMVC7ivmvxtsAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"TopSlice\"\n        title=\"TopSlice\"\n        src=\"/static/c257d562ff3d8ddb707d49a71d6852a5/92d15/figure2.png\"\n        srcset=\"/static/c257d562ff3d8ddb707d49a71d6852a5/63868/figure2.png 250w,\n/static/c257d562ff3d8ddb707d49a71d6852a5/0b533/figure2.png 500w,\n/static/c257d562ff3d8ddb707d49a71d6852a5/92d15/figure2.png 581w\"\n        sizes=\"(max-width: 581px) 100vw, 581px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h2>One Dimension Selection with 3D array</h2>\n<p>It's so common in R that we need select certain rows or certain columns when we working on 2-D matrix. In above example, we have shown that if things turn to 3D, it's harder for us to select just via one dimension: It actualy select a plate, or in other word, a slice of 2D matrix. Here I will give more examples.</p>\n<p>So now we can infer, if we now use <code class=\"language-text\">apply()</code> function here as the third dimensions, it wil cut all data horizontally into 4 slices, then iterate each matrix.</p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\"><span class=\"token operator\">></span> test <span class=\"token operator\">&lt;-</span> apply<span class=\"token punctuation\">(</span>d3<span class=\"token punctuation\">,</span> c<span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span> print<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n     <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span>    <span class=\"token number\">1</span>    <span class=\"token number\">3</span>    <span class=\"token number\">5</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span>    <span class=\"token number\">2</span>    <span class=\"token number\">4</span>    <span class=\"token number\">6</span>\n     <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span>    <span class=\"token number\">7</span>    <span class=\"token number\">9</span>   <span class=\"token number\">11</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span>    <span class=\"token number\">8</span>   <span class=\"token number\">10</span>   <span class=\"token number\">12</span>\n     <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span>   <span class=\"token number\">13</span>   <span class=\"token number\">15</span>   <span class=\"token number\">17</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span>   <span class=\"token number\">14</span>   <span class=\"token number\">16</span>   <span class=\"token number\">18</span>\n     <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span>   <span class=\"token number\">19</span>   <span class=\"token number\">21</span>   <span class=\"token number\">23</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span>   <span class=\"token number\">20</span>   <span class=\"token number\">22</span>   <span class=\"token number\">24</span>\n<span class=\"token operator\">></span></code></pre></div>\n<div style=\"margin: 50px\" >\n</div\n<p>Now we know how and what exactly the third (Z) axis is, and how can we iterate it via loop. So what <code class=\"language-text\">d3[1,,]</code> return? By checking the plot, we can infer that we can get another slice, but not horizontally, but vertically and parallel to the <code class=\"language-text\">wall</code> created by Y and Z axis. Like below, when we run <code class=\"language-text\">d3[1,,]</code>, we are setting x axis as 1, while no restricion for y or z axis. So it can be seen as a vertical slice plate was cut through x axis, but parallel with the wall created by y and z axises. So eventually we can get a 2-dimension matrix on that vertical slice.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 785px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5cda6422f5027bbe64715ca6ec149aa8/cda19/figure4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 76.8%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsSAAALEgHS3X78AAACNElEQVQ4y42T7U/TUBTG95/6xRfilOgWIpNEIW68mfhhAU0MEfXDTIwxCDgUEiABwwQHMukyttBJ07qXdutaurZs7R7vLYx1Y0NPcnJz721/9zlPzvGgIxqNxsVqk2zuadi2jWJZBysoME0TtmVd+teDLuGGkB3U6imOBBWxAxErO3ksrDFIJBJIJpPI5XKQJMl5jIanCXAnhdQtG4JYxd5hCavxHJa2eHyN8WTlsL7DolAoQBRFFItFlEqllsJ2NS11omwgSiBfCGRlW3Dy42oac+tZ7B8p6FXZhcJKpYJarQaKs6waWE7E4uZvLG6weD0XR3BqHncCUxgam0Fs/xjdK0PLQwqjRhskc38ESEoNkegvPAi9wS3/BPp8QXgHRvF4chbfE9wlYFvJzQNqrKqqUCoytncZRD4nEAi+JKAx9PnHcfN+CL6hZ/gWz7QB3eHp9E7XdVSrJ2DSHJ5HNnD3YRjX+0dw2/8EvsA4RiZJyXvs1UD3BS3bNHXIWgPvlhgMDE8T0AT6B5/ixr1RBEIz+HHA/79C6qFpVFEom3g7/xPewTCueYfhfxTGi1cfsLm1C0XVegM7jTXOFQqSgffLaUzPLuBTdA2HafaK5u8Auj9wSjZ0lBQTx3kN9frZBGjaidPMsiyTs3pPaFcPNU1zS3EWCkulUshms850GIbRFdrWNnQmeZ5HPp/HKelL63w+zxRqzr2iKCiXyz1VtgHp6wzDIJPJgOM4Z0/n1XaB/+XjXyO6XeXe0sLQAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"X=1Slice\"\n        title=\"X=1Slice\"\n        src=\"/static/5cda6422f5027bbe64715ca6ec149aa8/cda19/figure4.png\"\n        srcset=\"/static/5cda6422f5027bbe64715ca6ec149aa8/63868/figure4.png 250w,\n/static/5cda6422f5027bbe64715ca6ec149aa8/0b533/figure4.png 500w,\n/static/5cda6422f5027bbe64715ca6ec149aa8/cda19/figure4.png 785w\"\n        sizes=\"(max-width: 785px) 100vw, 785px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\"><span class=\"token operator\">></span> d3<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span>\n     <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span>    <span class=\"token number\">1</span>    <span class=\"token number\">7</span>   <span class=\"token number\">13</span>   <span class=\"token number\">19</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span>    <span class=\"token number\">3</span>    <span class=\"token number\">9</span>   <span class=\"token number\">15</span>   <span class=\"token number\">21</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span>    <span class=\"token number\">5</span>   <span class=\"token number\">11</span>   <span class=\"token number\">17</span>   <span class=\"token number\">23</span>\n<span class=\"token operator\">></span></code></pre></div>\n<p>The same logic could works for y axis. If we select <code class=\"language-text\">d3[,1,]</code>, you can image we are selecting a slice plate parallel to the wall created by X and Z axis. And it will return a 2-d matrix:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 785px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f8c9c57335ff1d0dc37f46d754f92f5c/cda19/figure5.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75.6%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsSAAALEgHS3X78AAACGklEQVQ4y51U32vTUBjtnynosNqOOn+wVRQfVMSxyaBz9WkMBr4I1YdVCkO3sXWdVYayyqrOtHvISGlt04R0pk3T/D7m3pK06TqVfXC5H7lfzj3fvefcENxwHAfDYdu2nxum1f/m1nh17XYb1WoVgiBAVVVa762FvITMpLDX68EwDGiaRmBQ4n5DaKm0xrJs6LqOSqUChmFQLpdpXqvVfBIBQNM0/QXbdmCZOg6PRewUePCiDEVp0828Db2ZbOJhhMa13GdjQdd6eLvxGa/Wi0isbmLxxQqOfnzDuBjbMgnCUpIkdDod5PMf8PjpAiZvPUAknkB4ZgnbuX2/A8cZjADDYUDSQr1epwxzuV3Ebk4jEpvB1P0ELt95juTLbbRkDed1dgaQnEe326Ujk8ngenQKl65EEIvPUob35lMoMI0Ay78CEoYEjEQ6ncbE1QiiN6Zx91ES4XgSz5bf4+dJ62KAu9ksJsJRXJu8jYfzK3iytIbl1/s4YqWLAe7t5TA7t4C5xVWsbRSQL4rIfhWoNkfF7gOO3hQBVBRl4BRdA8erWM+fYOfgF7a+1AeA9n9cChErsdOoBQ+ZGlLvvuPNVgnF4yb5I0DkDENPg8R+siwPCbY/n55K+HRQRmqzhI8FFpYxXjoBQI7jqEdZloUoilTgnq0Mw7WlZbg3LLl2FP59hiQICDE6z/P0JWk0Gmg2m4HWSWlHNc4V9h+o12DZ/u++8AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Y=1Slice\"\n        title=\"Y=1Slice\"\n        src=\"/static/f8c9c57335ff1d0dc37f46d754f92f5c/cda19/figure5.png\"\n        srcset=\"/static/f8c9c57335ff1d0dc37f46d754f92f5c/63868/figure5.png 250w,\n/static/f8c9c57335ff1d0dc37f46d754f92f5c/0b533/figure5.png 500w,\n/static/f8c9c57335ff1d0dc37f46d754f92f5c/cda19/figure5.png 785w\"\n        sizes=\"(max-width: 785px) 100vw, 785px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\"><span class=\"token operator\">></span> d3<span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span>\n     <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span>    <span class=\"token number\">1</span>    <span class=\"token number\">7</span>   <span class=\"token number\">13</span>   <span class=\"token number\">19</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span>    <span class=\"token number\">2</span>    <span class=\"token number\">8</span>   <span class=\"token number\">14</span>   <span class=\"token number\">20</span>\n<span class=\"token operator\">></span></code></pre></div>\n<p>Have you considered, why when we select <code class=\"language-text\">d3[,1,]</code>, it returns as above matrix instead of: </p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\">     <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span>    <span class=\"token number\">1</span>    <span class=\"token number\">2</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span>    <span class=\"token number\">7</span>    <span class=\"token number\">8</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span>   <span class=\"token number\">13</span>   <span class=\"token number\">14</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span>   <span class=\"token number\">19</span>   <span class=\"token number\">20</span></code></pre></div>\n<p>Above matrix seems more obvious from my figure, why there is a rotation here? My understand is there is a ranking priority between the 3 dimensions. The X axis has highest priority, so if X axis exist, which means we are selecting on x axis, the returned matrix will take x aixs as rows and the other axis as columns. Thus in my above example, then Y=1, the X axis (2 vlaues) will be set a rows and Z axis (4 values) will be set as columns. So eventually a 2 by 4 matrix is returned. If X axis is not exist, say <code class=\"language-text\">d3[1,,]</code>, Y axis have higher priority over Z aixs, it it will return Y axis as row, and Z axis as columns.</p>\n<hr>\n<p>In short, for me, it's not easy to select even one dimension from 3D array. </p>\n<ul>\n<li>It's more like cutting slices into a 3D object and get pieces of plates from them. </li>\n<li>The returned matrix may be rotated based on priorities of different dimensions. </li>\n<li>\n<p>It's hard to match names between them. Make sure you are correctly matched them everytime you are using 3D array.</p>\n<ul>\n<li>1): The second parameter <code class=\"language-text\">c(1,2,3)</code> in <code class=\"language-text\">apply()</code>; </li>\n<li>2): <code class=\"language-text\">d3[*,*,*]</code> in raw R code; </li>\n<li>3): Names like row, column, other like higher. </li>\n<li>4): Other common names like X/Y/Z axis.</li>\n</ul>\n</li>\n</ul>\n<p><strong>All these cause potential programming bugs for analyser</strong>.</p>\n<h2>Two Dimension Selection with 3D array</h2>\n<p>Then we can have a look how to select 2 Dimensions togather from 3D array. In other word, what code like <code class=\"language-text\">apply(d3, c(1,2) function(x) print(x))</code> would retrun? When we use <code class=\"language-text\">apply()</code> function, it will create a index list based on our parameter setting. When we set the second parameter as <code class=\"language-text\">c(1)</code>, it will return: <code class=\"language-text\">d3[1,,]</code>, <code class=\"language-text\">d3[2,,]</code> . So if we set the parameter as <code class=\"language-text\">c(1,2)</code>. It will return:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">d3[1,1,], d3[2,1,], d3[1,2,], d3[2,2,], d3[1,3,], d3[2,3,]</code></pre></div>\n<p>As you can see ,it's just the combination of the first (x) and second (y) dimensions, There are only 2 value in first dimensions, and there are only 3 dimensions in second dimensions, so there are totally 2*3=6 combinations. Then the apply() function will fetch data based on these 2-D index one by one, and iterate the whole data. Now what would be returned if both X and Y axis are selected? Yes a vector across Z axis. You can image a drill into the 3D object. Below I draw an example of <code class=\"language-text\">d3[2,1,]</code>:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 785px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d28e93bb395b6bf3592ea05f353eea46/cda19/figure6.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75.6%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsSAAALEgHS3X78AAACVklEQVQ4y41U+2/SYBTlvzSLJtOpi06Mj+mWDY3GZCbbD8bFBw4fRGfcFI0S2bK5EfxBjcy5GAiMxYFAC5SWwkrXN+XY1kBaKIk3+dL2ft89Pff2nHpgRLvdRueq67rjuXeZwXFNEAQBmqYhiqKjxmMHNDd4noeiKFBV1QaMbuh6CyRRRDqdRiaTQaFQAEmSVq0DsJdVq9WCJCtgGrKZhSwJKJrFZQbpPyxqdd44oxlnZItAp9bTtr3efm9GuUTg6esYwpu/8OjZG5yfmsfMg49Y+17CAa84zva1LMuyldA0DfV6HaIkYy36FWd9jzHkvYNT43cxOunH7MIqNuImoAy37jyd2TWbTYu6IIgGMxJbiQKC73/izJQfJyf8GPU9x/ErAUzPLmHlSx5NQXXtytObODwUUGOqiER3EAjFce56ECcuzxvACzg28QpjN5cRWk+BFzV3wF7aZuuqIiFTFLAYScB74wWGx/0YvnQPRy4EMHR1CcFwEoL0n4CSMTtZEpHMcXi5ksTpyQCOjs1g5OIcRqYNhrfX8Da6D1XTBwPaNywZyAZglkNoYw/X5hbh9T3ErfsRPAmn8e4zgSLF/9OkjYhjhm4MtzMsPm1RiCdLSO3TWP1GYPNHBbEdCmVG6AL2Rh9DxXCIaSeSFkDXha5LiFLV+BgJLK/vIkfWTThrbyDDjgZN+XAc5xStsRoNFqnd3/gQ28N2IgdNlQfLppPM5/OWR7PZrGF8BjWW7Qre9HZLU8EeCCjTXJ+oXQEZhrGMTlGU9SepVCqoVqtd4/dZzWWGfwE7I1m0PvcZwQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"X=2Y=1Slice\"\n        title=\"X=2Y=1Slice\"\n        src=\"/static/d28e93bb395b6bf3592ea05f353eea46/cda19/figure6.png\"\n        srcset=\"/static/d28e93bb395b6bf3592ea05f353eea46/63868/figure6.png 250w,\n/static/d28e93bb395b6bf3592ea05f353eea46/0b533/figure6.png 500w,\n/static/d28e93bb395b6bf3592ea05f353eea46/cda19/figure6.png 785w\"\n        sizes=\"(max-width: 785px) 100vw, 785px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>The code is below:</p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\"><span class=\"token operator\">></span> test <span class=\"token operator\">&lt;-</span> apply<span class=\"token punctuation\">(</span>d3<span class=\"token punctuation\">,</span> c<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span> print<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span>  <span class=\"token number\">1</span>  <span class=\"token number\">7</span> <span class=\"token number\">13</span> <span class=\"token number\">19</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span>  <span class=\"token number\">2</span>  <span class=\"token number\">8</span> <span class=\"token number\">14</span> <span class=\"token number\">20</span> <span class=\"token comment\"># Above plot shows this one: X=2 &amp; Y=1</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span>  <span class=\"token number\">3</span>  <span class=\"token number\">9</span> <span class=\"token number\">15</span> <span class=\"token number\">21</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span>  <span class=\"token number\">4</span> <span class=\"token number\">10</span> <span class=\"token number\">16</span> <span class=\"token number\">22</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span>  <span class=\"token number\">5</span> <span class=\"token number\">11</span> <span class=\"token number\">17</span> <span class=\"token number\">23</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span>  <span class=\"token number\">6</span> <span class=\"token number\">12</span> <span class=\"token number\">18</span> <span class=\"token number\">24</span>\n<span class=\"token operator\">></span></code></pre></div>\n<h2>An example to use 3D array?</h2>\n<p>In above sample, I shows what would happen if you directly created 3D array with pure number. The result is you get a complex and hard to read/understand/work data structure. I never used multiple dimensions array in my work, merely because I think it would be super easy to make mistake in coding. However, after some thinking, <strong>I think if the data structure is representing certain level of real world thing, multiple-array may be a good idea</strong>. Below is an example I did, I downloaded GDP <strong>per</strong> sector for <strong>per</strong> England regions and <strong>per</strong> year from <a href=\"https://www.ons.gov.uk/economy/grossdomesticproductgdp/datasets/quarterlycountryandregionalgdp\">official GOV website</a>.</p>\n<p>So the excel I downloaded contains UK's each regions' GDP per sectors like Agriculture, Mining .etc in each year from 2012-2019. So I will try read the data into R and form a 3D array. I read them all into a list, then use unlist function to collapse them all into a long vector. Then finally created an 3D array from the long vector. Note that the <code class=\"language-text\">dimnames</code> parameter is highly recommanded to name the x/y/z axis. Finally I get the 3D array object UKRegionGDPbyYear.</p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\">library<span class=\"token punctuation\">(</span><span class=\"token string\">\"readxl\"</span><span class=\"token punctuation\">)</span>\n\nRegionName <span class=\"token operator\">&lt;-</span> as.data.frame<span class=\"token punctuation\">(</span>read_excel<span class=\"token punctuation\">(</span><span class=\"token string\">\"./rgdptables19q430072020113950.xlsx\"</span><span class=\"token punctuation\">,</span> sheet<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> skip<span class=\"token operator\">=</span><span class=\"token number\">8</span><span class=\"token punctuation\">,</span> n_max<span class=\"token operator\">=</span><span class=\"token number\">11</span><span class=\"token punctuation\">,</span> col_names<span class=\"token operator\">=</span><span class=\"token boolean\">FALSE</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span>\nSectorName <span class=\"token operator\">&lt;-</span> as.character<span class=\"token punctuation\">(</span>as.data.frame<span class=\"token punctuation\">(</span>read_excel<span class=\"token punctuation\">(</span><span class=\"token string\">\"./rgdptables19q430072020113950.xlsx\"</span><span class=\"token punctuation\">,</span> sheet<span class=\"token operator\">=</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span> skip<span class=\"token operator\">=</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span> n_max<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> col_names<span class=\"token operator\">=</span><span class=\"token boolean\">FALSE</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token operator\">:</span><span class=\"token number\">23</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\nSectorName <span class=\"token operator\">&lt;-</span> sapply<span class=\"token punctuation\">(</span>SectorName<span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span> strsplit<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> split<span class=\"token operator\">=</span><span class=\"token string\">\",\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\nYears <span class=\"token operator\">&lt;-</span> as.character<span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">(</span><span class=\"token number\">2012</span><span class=\"token operator\">:</span><span class=\"token number\">2019</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\nGDP <span class=\"token operator\">&lt;-</span> list<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span>i <span class=\"token keyword\">in</span> <span class=\"token number\">3</span><span class=\"token operator\">:</span><span class=\"token number\">13</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    tmp <span class=\"token operator\">&lt;-</span> as.data.frame<span class=\"token punctuation\">(</span>read_excel<span class=\"token punctuation\">(</span><span class=\"token string\">\"./rgdptables19q430072020113950.xlsx\"</span><span class=\"token punctuation\">,</span>sheet<span class=\"token operator\">=</span>i<span class=\"token punctuation\">,</span> skip<span class=\"token operator\">=</span><span class=\"token number\">8</span><span class=\"token punctuation\">,</span> n_max<span class=\"token operator\">=</span><span class=\"token number\">8</span><span class=\"token punctuation\">,</span> col_names<span class=\"token operator\">=</span><span class=\"token boolean\">FALSE</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token operator\">:</span><span class=\"token number\">24</span><span class=\"token punctuation\">]</span>\n    rownames<span class=\"token punctuation\">(</span>tmp<span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;-</span> Years\n    colnames<span class=\"token punctuation\">(</span>tmp<span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;-</span> SectorName\n\n    GDP<span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span>RegionName<span class=\"token punctuation\">[</span>i<span class=\"token operator\">-</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">&lt;-</span> tmp\n<span class=\"token punctuation\">}</span>\n\nUKRegionGDPbyYear <span class=\"token operator\">&lt;-</span> array<span class=\"token punctuation\">(</span>unlist<span class=\"token punctuation\">(</span>GDP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                           c<span class=\"token punctuation\">(</span>length<span class=\"token punctuation\">(</span>Years<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> length<span class=\"token punctuation\">(</span>SectorName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> length<span class=\"token punctuation\">(</span>RegionName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                           dimnames <span class=\"token operator\">=</span> list<span class=\"token punctuation\">(</span>Years<span class=\"token punctuation\">,</span> SectorName<span class=\"token punctuation\">,</span> RegionName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># The dimnames is recommanded here.</span></code></pre></div>\n<p>In the final UKRegionGDPbyYear object, the first dimension is Years, the second dimension is Sectors, and the third dimension is RegionName. Thus since we know their real world meanings, we can easily select data we want like, answer questions like:</p>\n<ul>\n<li><strong>What is \"Education\" sector's GDP in each regions per year?</strong></li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\"><span class=\"token operator\">></span> UKRegionGDPbyYear<span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"Education\"</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span>\n     North East North West Yorkshire and The Humber East Midlands West Midlands\n<span class=\"token number\">2012</span>       <span class=\"token number\">99.5</span>       <span class=\"token number\">94.3</span>                     <span class=\"token number\">92.6</span>         <span class=\"token number\">102.2</span>         <span class=\"token number\">100.6</span>\n<span class=\"token number\">2013</span>       <span class=\"token number\">98.3</span>       <span class=\"token number\">98.4</span>                     <span class=\"token number\">96.6</span>         <span class=\"token number\">103.2</span>         <span class=\"token number\">100.1</span>\n<span class=\"token number\">2014</span>       <span class=\"token number\">96.5</span>       <span class=\"token number\">97.1</span>                     <span class=\"token number\">99.1</span>         <span class=\"token number\">102.9</span>          <span class=\"token number\">99.9</span>\n<span class=\"token number\">2015</span>       <span class=\"token number\">97.1</span>       <span class=\"token number\">98.7</span>                    <span class=\"token number\">102.7</span>         <span class=\"token number\">101.9</span>         <span class=\"token number\">100.4</span>\n<span class=\"token number\">2016</span>      <span class=\"token number\">100.0</span>      <span class=\"token number\">100.0</span>                    <span class=\"token number\">100.0</span>         <span class=\"token number\">100.0</span>         <span class=\"token number\">100.0</span>\n<span class=\"token number\">2017</span>       <span class=\"token number\">96.1</span>      <span class=\"token number\">102.6</span>                     <span class=\"token number\">98.7</span>         <span class=\"token number\">104.5</span>         <span class=\"token number\">103.6</span>\n<span class=\"token number\">2018</span>       <span class=\"token number\">94.1</span>      <span class=\"token number\">102.9</span>                    <span class=\"token number\">101.0</span>         <span class=\"token number\">104.8</span>         <span class=\"token number\">108.1</span>\n<span class=\"token number\">2019</span>       <span class=\"token number\">86.2</span>      <span class=\"token number\">105.3</span>                    <span class=\"token number\">100.8</span>         <span class=\"token number\">113.6</span>         <span class=\"token number\">101.3</span>\n     East of England London South East South West England Wales\n<span class=\"token number\">2012</span>           <span class=\"token number\">102.3</span>   <span class=\"token number\">98.8</span>       <span class=\"token number\">94.0</span>       <span class=\"token number\">94.4</span>    <span class=\"token number\">97.2</span> <span class=\"token number\">100.1</span>\n<span class=\"token number\">2013</span>           <span class=\"token number\">102.5</span>   <span class=\"token number\">98.7</span>       <span class=\"token number\">96.7</span>       <span class=\"token number\">96.8</span>    <span class=\"token number\">98.7</span> <span class=\"token number\">102.0</span>\n<span class=\"token number\">2014</span>            <span class=\"token number\">98.2</span>  <span class=\"token number\">103.2</span>       <span class=\"token number\">95.6</span>       <span class=\"token number\">97.8</span>    <span class=\"token number\">99.2</span>  <span class=\"token number\">99.3</span>\n<span class=\"token number\">2015</span>            <span class=\"token number\">98.1</span>  <span class=\"token number\">105.4</span>       <span class=\"token number\">98.3</span>       <span class=\"token number\">97.6</span>   <span class=\"token number\">100.6</span>  <span class=\"token number\">99.7</span>\n<span class=\"token number\">2016</span>           <span class=\"token number\">100.0</span>  <span class=\"token number\">100.0</span>      <span class=\"token number\">100.0</span>      <span class=\"token number\">100.0</span>   <span class=\"token number\">100.0</span> <span class=\"token number\">100.0</span>\n<span class=\"token number\">2017</span>            <span class=\"token number\">99.9</span>  <span class=\"token number\">102.8</span>      <span class=\"token number\">100.9</span>       <span class=\"token number\">99.4</span>   <span class=\"token number\">101.4</span>  <span class=\"token number\">98.3</span>\n<span class=\"token number\">2018</span>           <span class=\"token number\">103.4</span>  <span class=\"token number\">104.6</span>       <span class=\"token number\">98.8</span>       <span class=\"token number\">98.0</span>   <span class=\"token number\">102.2</span>  <span class=\"token number\">95.1</span>\n<span class=\"token number\">2019</span>           <span class=\"token number\">111.2</span>  <span class=\"token number\">113.4</span>      <span class=\"token number\">103.5</span>       <span class=\"token number\">98.5</span>   <span class=\"token number\">105.7</span> <span class=\"token number\">100.6</span></code></pre></div>\n<ul>\n<li><strong>What is London's GDP in \"Arts\" sector in 2012-2015 ?</strong></li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\"><span class=\"token operator\">></span> UKRegionGDPbyYear<span class=\"token punctuation\">[</span>c<span class=\"token punctuation\">(</span><span class=\"token string\">\"2012\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"2013\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"2014\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"2015\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"Arts\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"London\"</span><span class=\"token punctuation\">]</span>\n<span class=\"token number\">2012</span> <span class=\"token number\">2013</span> <span class=\"token number\">2014</span> <span class=\"token number\">2015</span>\n<span class=\"token number\">89.4</span> <span class=\"token number\">88.5</span> <span class=\"token number\">93.3</span> <span class=\"token number\">99.0</span>\n<span class=\"token operator\">></span></code></pre></div>\n<ul>\n<li><strong>What is London's top 5 GDP sector in 2019?</strong></li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\"><span class=\"token operator\">></span> sort<span class=\"token punctuation\">(</span>UKRegionGDPbyYear<span class=\"token punctuation\">[</span><span class=\"token string\">\"2019\"</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"London\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>decreasing<span class=\"token operator\">=</span><span class=\"token boolean\">TRUE</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token operator\">:</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span>\n                                            Mining <span class=\"token operator\">&amp;</span> quarrying\n                                                         <span class=\"token number\">168.5</span>\n                                 Information and Communication\n                                                         <span class=\"token number\">122.2</span>\n                 Administrative and support service activities\n                                                         <span class=\"token number\">118.4</span>\nWholesale and retail<span class=\"token operator\">:</span> repair of motor vehicles and motorcycles\n                                                         <span class=\"token number\">116.7</span>\n                                                   Agriculture\n                                                         <span class=\"token number\">114.9</span>\n<span class=\"token operator\">></span></code></pre></div>\n<p>In short, when you creat a multiple dimension array with some real-world thing represented (and named in dimensions). It would be easiler to use it.</p>","frontmatter":{"date":"March 06, 2021","slug":"/notes/Deeper-look-of-multiple-dimension-array()-and-apply()-in-R","title":"Deeper look of multiple dimension array() and apply() in R","abstract":"Recently my wife asked a question that how to understand 3-dimension array in R. And How to understand the apply() function when it is applied on multi-dimension array. After digging further, I think it is really interesing..."}}},"pageContext":{"slug":"/notes/Deeper-look-of-multiple-dimension-array()-and-apply()-in-R"}}}