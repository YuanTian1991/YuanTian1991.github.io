{
    "componentChunkName": "component---src-templates-note-template-js",
    "path": "/notes/Deeper-look-of-multiple-dimension-array()-and-apply()-in-R",
    "result": {"data":{"markdownRemark":{"html":"<!-- <a style=\"text-decoration: none;border-radius: 4px; background-color: rgba(41,98,255); color: white; padding: 0.3em 1em\" href=\"https://ty.hashnode.dev/multiple-dimension-array-and-apply-in-r\">Hashnode</a> -->\n<p>The thing started my wife ask me how to understand the 3-dimension object created by the <code class=\"language-text\">array()</code> function in R. We know that if there are only 2 dimensions, they are the x-axis and y-axis in a plot. And in R (or any other terminal tool), it looks like rows and columns. For example, below I created a 2-dimension array data. (In most case, I always call them <code class=\"language-text\">matrix</code> or <code class=\"language-text\">data.frame</code>, maybe I have been wrong for a very long time...haha)</p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\"><span class=\"token operator\">></span> d2 <span class=\"token operator\">&lt;-</span> array<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token operator\">:</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span> <span class=\"token operator\">*</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> c<span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">></span> d2\n     <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span>    <span class=\"token number\">1</span>    <span class=\"token number\">5</span>    <span class=\"token number\">9</span>   <span class=\"token number\">13</span>   <span class=\"token number\">17</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span>    <span class=\"token number\">2</span>    <span class=\"token number\">6</span>   <span class=\"token number\">10</span>   <span class=\"token number\">14</span>   <span class=\"token number\">18</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span>    <span class=\"token number\">3</span>    <span class=\"token number\">7</span>   <span class=\"token number\">11</span>   <span class=\"token number\">15</span>   <span class=\"token number\">19</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span>    <span class=\"token number\">4</span>    <span class=\"token number\">8</span>   <span class=\"token number\">12</span>   <span class=\"token number\">16</span>   <span class=\"token number\">20</span></code></pre></div>\n<p>Other functions like <code class=\"language-text\">matrix()</code>, <code class=\"language-text\">data.frame()</code> .etc can reach similar results. In short, in the above example, we get a 2-dimension data structure with rows and columns. Then as we know, the <code class=\"language-text\">apply()</code> function is a very nice way to quickly iterate rows or columns.</p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\"><span class=\"token operator\">></span> test <span class=\"token operator\">&lt;-</span> apply<span class=\"token punctuation\">(</span>d2<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span> print<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span>  <span class=\"token number\">1</span>  <span class=\"token number\">5</span>  <span class=\"token number\">9</span> <span class=\"token number\">13</span> <span class=\"token number\">17</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span>  <span class=\"token number\">2</span>  <span class=\"token number\">6</span> <span class=\"token number\">10</span> <span class=\"token number\">14</span> <span class=\"token number\">18</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span>  <span class=\"token number\">3</span>  <span class=\"token number\">7</span> <span class=\"token number\">11</span> <span class=\"token number\">15</span> <span class=\"token number\">19</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span>  <span class=\"token number\">4</span>  <span class=\"token number\">8</span> <span class=\"token number\">12</span> <span class=\"token number\">16</span> <span class=\"token number\">20</span>\n<span class=\"token operator\">></span>\n<span class=\"token operator\">></span> test <span class=\"token operator\">&lt;-</span> apply<span class=\"token punctuation\">(</span>d2<span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span> print<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token number\">1</span> <span class=\"token number\">2</span> <span class=\"token number\">3</span> <span class=\"token number\">4</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token number\">5</span> <span class=\"token number\">6</span> <span class=\"token number\">7</span> <span class=\"token number\">8</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span>  <span class=\"token number\">9</span> <span class=\"token number\">10</span> <span class=\"token number\">11</span> <span class=\"token number\">12</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token number\">13</span> <span class=\"token number\">14</span> <span class=\"token number\">15</span> <span class=\"token number\">16</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token number\">17</span> <span class=\"token number\">18</span> <span class=\"token number\">19</span> <span class=\"token number\">20</span>\n<span class=\"token operator\">></span></code></pre></div>\n<p>Then here comes the important part. I know many people are \"memorying\" that the second parameter in the <code class=\"language-text\">apply()</code> function decided the dimension it iterates, including me before. So we all think that 1 indicates rows, and 2 indicates columns right? So there come two vital questions:</p>\n<ol>\n<li>How the second parameter works for multi-dimension arrays? If you have 3 dimensions, then what the \"first\" dimension (1) iteration result will be?</li>\n<li>What will <code class=\"language-text\">apply(d2, c(1,2), function(x) print(x))</code> output?</li>\n</ol>\n<hr>\n<h2>Visualisation of 3-Dimension Array</h2>\n<p>So I want to visualise the 3-Dimension array a bit. I firstly created a 3D array here. I defined a 3D array with 3 dimensions as 2, 3, 4 separately. The purposed is if dimensions have different value, it's easier for me to find which one is which.</p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\">d3 <span class=\"token operator\">&lt;-</span> array<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token operator\">:</span>c<span class=\"token punctuation\">(</span><span class=\"token number\">2</span> <span class=\"token operator\">*</span> <span class=\"token number\">3</span> <span class=\"token operator\">*</span> <span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> c<span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Then let's have a look at what it looks like below. Seems we can see there are 4 matrixes, that there is a <code class=\"language-text\">,,1</code> at the beginning of each, so we can guess out that the <code class=\"language-text\">,,</code> indicates 3 dimensions, and <code class=\"language-text\">,,[]</code>, the third value after the second comma indicates the third dimension. There are 4 matrixes here because previous I defined the three dimensions as <code class=\"language-text\">c(2, 3, 4)</code>. Only the third dimension has 4 elements. The first dimension should only have 2 elements, while the second dimension should only have 3 elements.</p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\"><span class=\"token operator\">></span> d3\n<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">,</span> <span class=\"token number\">1</span>\n\n     <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span>    <span class=\"token number\">1</span>    <span class=\"token number\">3</span>    <span class=\"token number\">5</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span>    <span class=\"token number\">2</span>    <span class=\"token number\">4</span>    <span class=\"token number\">6</span>\n\n<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">,</span> <span class=\"token number\">2</span>\n\n     <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span>    <span class=\"token number\">7</span>    <span class=\"token number\">9</span>   <span class=\"token number\">11</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span>    <span class=\"token number\">8</span>   <span class=\"token number\">10</span>   <span class=\"token number\">12</span>\n\n<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">,</span> <span class=\"token number\">3</span>\n\n     <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span>   <span class=\"token number\">13</span>   <span class=\"token number\">15</span>   <span class=\"token number\">17</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span>   <span class=\"token number\">14</span>   <span class=\"token number\">16</span>   <span class=\"token number\">18</span>\n\n<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">,</span> <span class=\"token number\">4</span>\n\n     <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span>   <span class=\"token number\">19</span>   <span class=\"token number\">21</span>   <span class=\"token number\">23</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span>   <span class=\"token number\">20</span>   <span class=\"token number\">22</span>   <span class=\"token number\">24</span>\n\n<span class=\"token operator\">></span></code></pre></div>\n<p>Above is still hard for us to understand the 3D structure of the data. And even, later we want to see how the <code class=\"language-text\">apply()</code> function works on it. So I decided to visualise it. In the below figure, I just screenshot the above 4 matrixes, then rotated a bit via Powerpoint. Now we can clearly see the 3 dimensions. In the above plot there are 3 axes, normally in 2-dimension matrixes, we normally only can see two axes (X and Y), we named them as row and column in 2-dimension. However, in the 3D situation, we need to add one more axis (I named it as Z here), which does NOT exist in the 2D situation. That's why I can't simply call it \"hight\" or \"tall\" or anything.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 710px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 72%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAABqElEQVQ4y41UuaoCQRDc3/UCBQNPDDVUDA1ERUMjczNjEwPvWxC877ukmjfLsKvyGpqdne2pqe6uXgN/9nq9bE+1Vu/X6xXb7RabzQaHwwHH49EWY/wCod1uNzlMJ+Dz+cRoNEKz2USn08F6vRa/XC4Sb1gZ0njodDoJCAMJOp/PUavVMJvNxNvtNqbTqYAPBgO5zATUGTIdldJisUC9Xkc+n0coFILL5UIulzPZWM2W8uPxwHg8ltuWyyXS6TS8Xq94NBpFLBZDpVKR76o8utsY6vUiu1KphEgkgmAwKKBOpxOpVEoy0Gv+E3C328maTBOJBNxuNxwOB3w+HwKBAIrFohnzqYlfAff7PZLJpACFw2Fh6vf7US6XJe4roL6pA1Jv2WwWHo9H0iUoa1qtVnE+n//H8H6/m4DUViaTQTweR6FQQKPRkKZ9GgQd1NA3ebMCpFGLq9XKZMzJoGSsU2VLmTaZTESs3W5X6sdOU+DqIMXMb2wWJaW0aGOoXnq9HlqtFvr9vkwA1c8pIDhtOBzKuHGP62+dNvT60clKrSlgKxPrz8Ca8hurgRNxcRX66gAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/df54fcd4d2887934fda92a1cd521b9ca/7131f/figure1.png\"\n        srcset=\"/static/df54fcd4d2887934fda92a1cd521b9ca/63868/figure1.png 250w,\n/static/df54fcd4d2887934fda92a1cd521b9ca/0b533/figure1.png 500w,\n/static/df54fcd4d2887934fda92a1cd521b9ca/7131f/figure1.png 710w\"\n        sizes=\"(max-width: 710px) 100vw, 710px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>One very interesting thing is, I think in the above figure, the 3 dimensions actually have many names in different scenarios. For example, as I labelled in the above plot, <strong>name <code class=\"language-text\">X</code>, <code class=\"language-text\">Y</code>, and <code class=\"language-text\">Z</code> are named by me</strong>, which means maybe for other people, they prefer to think the <code class=\"language-text\">Y</code> axis in my plot should be labelled as <code class=\"language-text\">X</code>. <strong>These names are mathematical or even just personal labels, it varies.</strong></p>\n<p><strong>However, in R language, it has defined the three dimensions, which is fixed and not changeable by personal ideas.</strong> For example, my above plot shows, the third dimension (<code class=\"language-text\">Z</code> axis) is the one vertical to the floor. So it means if you are selecting a 3D array by the third dimensions (<code class=\"language-text\">Z</code> axis). You are actually selecting a horizontal slice through the 3D objects.</p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\"><span class=\"token operator\">></span> d3<span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span></code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 581px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50.4%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABcSAAAXEgFnn9JSAAACb0lEQVQoz43S30taYRgH8OdsREt3OdhAwljC0TANz06iifk7xYaeQxRehDI4p44XGopgtSnDCvUIHipEL0RBFzIGxcpSjK6EvPSqf6Dr/obGe2Sy3Yx94eV94H3eDw8vL8AfIQgClpeXwWg0gtlsBqvVChaLBeM4DgKBADidTrGPZdlpnuel6XQakskklkql4PDwEHieH0Grq6uQyWQgHA6DXq8HkiSxjY0NDMEOhwN2ojtAUdQb2yhJmqbrm5ubqXQ6/Z5hGKjVapDL5eDo6Aig2WzC+fk5nJ6eIhjz+/0IhO3tbYS/ttvtH2w2G+fz+cpWq/XSYDD0cBzvzs3Ndbxeb51hmI+CIEzU63XY3d0FaLVa0G63oVqtgsvlQtCE0WjE3W53wO/383a7/YderxcBpVJ5rdPprrVabW9hYeFubW2tk81mS5VKRfH09ASDwQCDg4MDODs7g1KpNG02m2mNRvOZIIgGSZLt+fn5G6VS2SYI4kqtVt/gOH7rcDh6kUjkezab/Voulz2xWOwtALx4fn4evd/FxQX2+PgIiURihWXZ3tLS0i0CSJL8OTs7ezUzM9NZXFzsBYPBy729vdLx8TFTKBS0EonkFUK63a7ooFoul4/Qh4cHtL0MhUJUJBK59Hg8PZPJ1KEo6objuG+5XO6LIAjuWCz2Dl1ES6VSoR07OTkZg+hnjPO7cX19fSUejzf39/eFYrH4KZ/PawBAnGYwGIg99/f3mMlkEu9tbW2BQqH4G0KZnJwco9FoVJ7P58fTTE1NidMUCgWxVyaTid/pv4KARqMBw+FQrPv9Pub1esUzmqZBKpX+E/gFIbcDrBlJSBsAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/c257d562ff3d8ddb707d49a71d6852a5/92d15/figure2.png\"\n        srcset=\"/static/c257d562ff3d8ddb707d49a71d6852a5/63868/figure2.png 250w,\n/static/c257d562ff3d8ddb707d49a71d6852a5/0b533/figure2.png 500w,\n/static/c257d562ff3d8ddb707d49a71d6852a5/92d15/figure2.png 581w\"\n        sizes=\"(max-width: 581px) 100vw, 581px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h2>One Dimension Selection with a 3D array</h2>\n<p>It's so common in R that we need to select certain rows or certain columns when we working on a 2-D matrix. In the above example, we have shown that if things turn to 3D, it's harder for us to select just via one dimension: It actually selects a plate, or in another word, a slice of a 2D matrix. Here I will give more examples.</p>\n<p>So now we can infer, if we now use the <code class=\"language-text\">apply()</code> function here as the third dimensions, it will cut all data horizontally into 4 slices, then iterate each matrix.</p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\"><span class=\"token operator\">></span> test <span class=\"token operator\">&lt;-</span> apply<span class=\"token punctuation\">(</span>d3<span class=\"token punctuation\">,</span> c<span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span> print<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n     <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span>    <span class=\"token number\">1</span>    <span class=\"token number\">3</span>    <span class=\"token number\">5</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span>    <span class=\"token number\">2</span>    <span class=\"token number\">4</span>    <span class=\"token number\">6</span>\n     <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span>    <span class=\"token number\">7</span>    <span class=\"token number\">9</span>   <span class=\"token number\">11</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span>    <span class=\"token number\">8</span>   <span class=\"token number\">10</span>   <span class=\"token number\">12</span>\n     <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span>   <span class=\"token number\">13</span>   <span class=\"token number\">15</span>   <span class=\"token number\">17</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span>   <span class=\"token number\">14</span>   <span class=\"token number\">16</span>   <span class=\"token number\">18</span>\n     <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span>   <span class=\"token number\">19</span>   <span class=\"token number\">21</span>   <span class=\"token number\">23</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span>   <span class=\"token number\">20</span>   <span class=\"token number\">22</span>   <span class=\"token number\">24</span>\n<span class=\"token operator\">></span></code></pre></div>\n<p>Now we know how and what exactly the third (Z) axis is, and how can we iterate it via a loop. So what <code class=\"language-text\">d3[1,,]</code> return? By checking the plot, we can infer that we can get another slice, but not horizontally, but vertically and parallel to the <code class=\"language-text\">wall</code> created by the Y and Z-axis. Like below, when we run <code class=\"language-text\">d3[1,,]</code>, we are setting X-axis as 1, while no restriction for the Y or Z axis. So it can be seen as a vertical slice plate that was cut through X-axis but parallels with the wall created by the Y and Z axes. So eventually we can get a 2-dimension matrix on that vertical slice.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 785px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 76.8%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsTAAALEwEAmpwYAAACLklEQVQ4y42T60/TUBiH+VdNCEEgykVAiIkscjcaExITMYIJiTEmxgsCZiAmjJswcOBU3Bhuw7NGt8narl1bCo9poQ1b3PT90nNOz/uc33uro8JOT0/9r7f2TNVM9n8obO/9Ip//jaqqHB8fl/nVXXS+CPPMsGxEVuNjLM/ilsTceoZXi1EikR2i0SjJZBIhBLZtnwErVXh707L58r1AKPKTt+uCubVD5jcEwQ+C5YhAURQ0TXNVFotF39dXeHJycq7yDJw90plZPSS4IVjYFMyupJh8Eebxy23CezmqpcoHFgoFSqWSu9Y0lbTIMb2U4MnsLncnFrh2a5KG9hG6+sZY2tynWqrKQjZN04VKkiAvGzwLfqWjb5yGtn5aOgdp7hqmd/AhofBB1cLVVRZBUVVURWZ5bYup19vcGJ7kcscQ9a0DNLb309ozyvvVz9WBlZU1TBNdKyJlFR48XaGl5x6NbQGudg/S1jNC4PYEoXDi3wr96jph6xpHRZvn7+J0Be5zpXuIps5R6luH6B0YJ/wpXRtY1i7nwLxiMTW9Q9P1MS4136T/ziNmgiGSaYFpWrVDvvjDMEyMkoaULzG3esibhTC70W9ks9VbpaZCy7LQdQ3dsDlSDP+iXChwsL+HJEl+e/0NWqbQaW5d15Fl2b/gnDmWy+WIxWKk02kX6kxJTaBjzsVEIuE6yfLZaHlAJ7eqWnQfdEbNO68JzGQyxONxf+BTqZT7iDf4/5PDP7W2XWdJGZhsAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/5cda6422f5027bbe64715ca6ec149aa8/cda19/figure4.png\"\n        srcset=\"/static/5cda6422f5027bbe64715ca6ec149aa8/63868/figure4.png 250w,\n/static/5cda6422f5027bbe64715ca6ec149aa8/0b533/figure4.png 500w,\n/static/5cda6422f5027bbe64715ca6ec149aa8/cda19/figure4.png 785w\"\n        sizes=\"(max-width: 785px) 100vw, 785px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\"><span class=\"token operator\">></span> d3<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span>\n     <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span>    <span class=\"token number\">1</span>    <span class=\"token number\">7</span>   <span class=\"token number\">13</span>   <span class=\"token number\">19</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span>    <span class=\"token number\">3</span>    <span class=\"token number\">9</span>   <span class=\"token number\">15</span>   <span class=\"token number\">21</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span>    <span class=\"token number\">5</span>   <span class=\"token number\">11</span>   <span class=\"token number\">17</span>   <span class=\"token number\">23</span>\n<span class=\"token operator\">></span></code></pre></div>\n<p>The same logic could work for Y-axis. If we select <code class=\"language-text\">d3[,1,]</code>, you can imagine we are selecting a slice plate parallel to the wall created by the X and Z axis. And it will return a 2-d matrix:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 785px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75.6%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsTAAALEwEAmpwYAAACIElEQVQ4y52U7WvTUBTG+2cKg1m70mHRvYl+UZg4x6SbKwjSD/umMIb4xbGAUVDGmkqd68pmi9k6rK1N2qa1L2mT5TbJIyczJX1D9MAlN7m5v/vcc557fQBg27bT3LAsq983mInhf1RVRaFQQLlcRrfbhWma/TGfF9Rut6FpGhhj0PVLQkMstFBSOs64aVkwDAPFYhHZbBaiKCKfzzvvrogBIK3kDtB3y2Q4Oa/h3WcZPystqO0mDMbQ6/UcMC1MT2ruHJ/bGQ6a1GMG3vBJvNhNYX2Lx5OnMaSODjEuRrbsPkllvV5Hp9OBIMSxvBJBMHwPwaUIpuc3scfvD+TUm9u+Qi+Q5EuS5IATgoDw7UUEQvMI341g6tYG1mIcKnUNk3Y2AqS8UOV0XQfHcQiGwrg2FcDswkP4F6NYWnmJRLr4xw32CHSsQtouBQGv3whiJjSHOw824V+I4tGzXaTPav8GJJ9RxOMH8M/MYjpwE/dXY1iOvsbzbQHHovJ/ChMJAatr63i8sYVXXBL76So+pBScXjSugPYY4HClvMAr+zCUlEvsHXzH+2QRfFLC6cWvvsK/FoX8R0UZPoJfzyVscyfYeZvFYUZ2ThFNmajQrTDlr9lsjqzcbjXw6UjEDv8NH5M5MEMfa50BIB34TCaDXC6HarWKWq3m2MdVblsMZz8a+JKtYNylMgKkE1IqlZxbRFEUyLLs9Mnk3lA1NtHYvwFcNGDWYmCZiwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/f8c9c57335ff1d0dc37f46d754f92f5c/cda19/figure5.png\"\n        srcset=\"/static/f8c9c57335ff1d0dc37f46d754f92f5c/63868/figure5.png 250w,\n/static/f8c9c57335ff1d0dc37f46d754f92f5c/0b533/figure5.png 500w,\n/static/f8c9c57335ff1d0dc37f46d754f92f5c/cda19/figure5.png 785w\"\n        sizes=\"(max-width: 785px) 100vw, 785px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\"><span class=\"token operator\">></span> d3<span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span>\n     <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span>    <span class=\"token number\">1</span>    <span class=\"token number\">7</span>   <span class=\"token number\">13</span>   <span class=\"token number\">19</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span>    <span class=\"token number\">2</span>    <span class=\"token number\">8</span>   <span class=\"token number\">14</span>   <span class=\"token number\">20</span>\n<span class=\"token operator\">></span></code></pre></div>\n<p>Have you considered, why when we select <code class=\"language-text\">d3[,1,]</code>, it returns as above matrix instead of:</p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\">     <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span>    <span class=\"token number\">1</span>    <span class=\"token number\">2</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span>    <span class=\"token number\">7</span>    <span class=\"token number\">8</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span>   <span class=\"token number\">13</span>   <span class=\"token number\">14</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span>   <span class=\"token number\">19</span>   <span class=\"token number\">20</span></code></pre></div>\n<p>The above matrix seems more obvious from my figure, why there is rotation here? My understanding is there is a ranking priority between the 3 dimensions. The X-axis has the highest priority, so if X-axis exist, which means we are selecting the X-axis, the returned matrix will take the X-axis as rows and the other axis as columns. Thus in my above example, then Y=1, the X-axis (contains 2 values) will be set rows and Z-axis (contains 4 values) will be set as columns. So eventually a 2 by 4 matrix is returned. If X-axis does not exist, say <code class=\"language-text\">d3[1,,]</code>, Y-axis have a higher priority over the Z-axis, it will return Y-axis as a row, and Z axis as columns.</p>\n<hr>\n<p>In short, for me, it's not easy to select even one dimension from a 3D array.</p>\n<ul>\n<li>It's more like cutting slices into a 3D object and get pieces of plates from them.</li>\n<li>The returned matrix may be rotated based on priorities of different dimensions.</li>\n<li>It's hard to match names between them. Make sure you have correctly matched them every time you are using the 3D array.\n<ul>\n<li>1): The second parameter <code class=\"language-text\">c(1,2,3)</code> in <code class=\"language-text\">apply()</code>;</li>\n<li>2): <code class=\"language-text\">d3[*,*,*]</code> in raw R code;</li>\n<li>3): Names like row, column, other like higher.</li>\n<li>4): Other common names like X/Y/Z axis.</li>\n</ul>\n</li>\n</ul>\n<p><strong>All these cause potential programming bugs for analyser</strong>.</p>\n<h2>Two Dimension Selection with a 3D array</h2>\n<p>Then we can have a look how to select 2 Dimensions togather from 3D array. In other word, what code like <code class=\"language-text\">apply(d3, c(1,2) function(x) print(x))</code> would retrun? When we use <code class=\"language-text\">apply()</code> function, it will create a index list based on our parameter setting. When we set the second parameter as <code class=\"language-text\">c(1)</code>, it will return: <code class=\"language-text\">d3[1,,]</code>, <code class=\"language-text\">d3[2,,]</code> . So if we set the parameter as <code class=\"language-text\">c(1,2)</code>. It will return:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">d3[1,1,], d3[2,1,], d3[1,2,], d3[2,2,], d3[1,3,], d3[2,3,]</code></pre></div>\n<p>As you can see, it's just the combination of the first (x) and second (y) dimensions, There are only 2 values in the first dimensions, and there are only 3 values in the second dimensions, so there are a totally <code class=\"language-text\">2*3=6</code> combinations. Then the apply() function will fetch data based on these 2-D index one by one, and iterate the whole data. Now, what would be returned if both X and Y axis are selected? Yes, a vector across Z-axis. You can image a drill into the 3D object. Below I draw an example of <code class=\"language-text\">d3[2,1,]</code>:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 785px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75.6%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsTAAALEwEAmpwYAAACUklEQVQ4y42U60/TYBSH+S/VGCVCgoRMUdEQIET5AIkfDKJRBNGggREjaJwhzCUY+GAUjHESV5wMnLt0K1vH6Oh1l8e02rEbiSdp2p72PO/vvD2/tgFUKhXcc6lUqt67Ofco/8srSoFYLEY6nUZV1bqatlpguVymUChgGAaWZR0vxHFUyiVEMcG2IBAOh4lGo8Tjcae2Dtioyl5VN0yknG5TMA3VKY4lJIS9HPuyQrlUxDBMTNOs1rXVguqjQkYSefpilVeBINOzL7k0cJeRidcsf4gjHxr1bze2bLfpKpNlGV03WV3fwDM8wxnPOJ1943T1TzL24C3+j8fA2u4che7eKYriQDVNJyUm2NyK8twXpGdois4bD+kamqX9+mP6x+bwre9yUDDrlLnR1LKqauTkDP61IDOLn7l86xkXrk3QPfCIc/3zXBz24l3+Rv7Iag1slG1vsGloRJI63pUQvSNztPdNcv7qfU73TnOqz8vUYhBF/U+g/dUMXWX7t8KCX6B78Alne0bpuHKbjsF5ekb9eP1hDLN0MrD2gTMGuooQVVha3eHmnQU8Q5OM3PMx80ZgcS3OXlL5O7cN41bdw1YKgzs53m2m2fgu8uNXhsBGgsCmyPsvaWLpoyqwMZoUWsUimqYiZjUkWa0WpaUMS4EtvCsCP6NZqNh242SFDsyyHOvl8/mGEYfD/AHb4R18a2E+fd3FMvWTx8ZN2oYPhUJEIhEkaZ9sNouu61XlpaJFXtFJSoe0smwT0HZIMpl0/iKZTIZUKuVc2+5pMmaLdm3gH8fMWaTpxoDvAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image.png\"\n        title=\"image.png\"\n        src=\"/static/d28e93bb395b6bf3592ea05f353eea46/cda19/figure6.png\"\n        srcset=\"/static/d28e93bb395b6bf3592ea05f353eea46/63868/figure6.png 250w,\n/static/d28e93bb395b6bf3592ea05f353eea46/0b533/figure6.png 500w,\n/static/d28e93bb395b6bf3592ea05f353eea46/cda19/figure6.png 785w\"\n        sizes=\"(max-width: 785px) 100vw, 785px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>The code is below:</p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\"><span class=\"token operator\">></span> test <span class=\"token operator\">&lt;-</span> apply<span class=\"token punctuation\">(</span>d3<span class=\"token punctuation\">,</span> c<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span> print<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span>  <span class=\"token number\">1</span>  <span class=\"token number\">7</span> <span class=\"token number\">13</span> <span class=\"token number\">19</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span>  <span class=\"token number\">2</span>  <span class=\"token number\">8</span> <span class=\"token number\">14</span> <span class=\"token number\">20</span> <span class=\"token comment\"># Above plot shows this one: X=2 &amp; Y=1</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span>  <span class=\"token number\">3</span>  <span class=\"token number\">9</span> <span class=\"token number\">15</span> <span class=\"token number\">21</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span>  <span class=\"token number\">4</span> <span class=\"token number\">10</span> <span class=\"token number\">16</span> <span class=\"token number\">22</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span>  <span class=\"token number\">5</span> <span class=\"token number\">11</span> <span class=\"token number\">17</span> <span class=\"token number\">23</span>\n<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span>  <span class=\"token number\">6</span> <span class=\"token number\">12</span> <span class=\"token number\">18</span> <span class=\"token number\">24</span>\n<span class=\"token operator\">></span></code></pre></div>\n<h2>An example to use a 3D array?</h2>\n<p>In the above sample, I show what would happen if you directly created 3D array with pure numbers. The result is you get a complex and hard to read/understand/work data structure. I never used multiple dimensions array in my work, merely because I think it would be super easy to make mistake in coding. However, after some thinking, <strong>I think if the data structure is representing a certain level of real-world thing, multiple-array may be a good idea</strong>. Below is an example I did, I downloaded GDP <strong>per</strong> sector for <strong>per</strong> England regions and <strong>per</strong> year from <a href=\"https://www.ons.gov.uk/economy/grossdomesticproductgdp/datasets/quarterlycountryandregionalgdp\">official GOV website</a>.</p>\n<p>So the excel I downloaded contains UK's each regions' GDP per sectors like Agriculture, Mining .etc in each year from 2012-2019. So I will try to read the data into R and form a 3D array. I read them all into a list, then use unlist function to collapse them all into a long vector. Then finally created a 3D array from the long vector. Note that the <code class=\"language-text\">dimnames</code> parameter is highly recommended to name the x/y/z axis. Finally, I get the 3D array object UKRegionGDPbyYear.</p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\">library<span class=\"token punctuation\">(</span><span class=\"token string\">\"readxl\"</span><span class=\"token punctuation\">)</span>\n\nRegionName <span class=\"token operator\">&lt;-</span> as.data.frame<span class=\"token punctuation\">(</span>read_excel<span class=\"token punctuation\">(</span><span class=\"token string\">\"./rgdptables19q430072020113950.xlsx\"</span><span class=\"token punctuation\">,</span> sheet<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> skip<span class=\"token operator\">=</span><span class=\"token number\">8</span><span class=\"token punctuation\">,</span> n_max<span class=\"token operator\">=</span><span class=\"token number\">11</span><span class=\"token punctuation\">,</span> col_names<span class=\"token operator\">=</span><span class=\"token boolean\">FALSE</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span>\nSectorName <span class=\"token operator\">&lt;-</span> as.character<span class=\"token punctuation\">(</span>as.data.frame<span class=\"token punctuation\">(</span>read_excel<span class=\"token punctuation\">(</span><span class=\"token string\">\"./rgdptables19q430072020113950.xlsx\"</span><span class=\"token punctuation\">,</span> sheet<span class=\"token operator\">=</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span> skip<span class=\"token operator\">=</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span> n_max<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> col_names<span class=\"token operator\">=</span><span class=\"token boolean\">FALSE</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token operator\">:</span><span class=\"token number\">23</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\nSectorName <span class=\"token operator\">&lt;-</span> sapply<span class=\"token punctuation\">(</span>SectorName<span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span> strsplit<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> split<span class=\"token operator\">=</span><span class=\"token string\">\",\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\nYears <span class=\"token operator\">&lt;-</span> as.character<span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">(</span><span class=\"token number\">2012</span><span class=\"token operator\">:</span><span class=\"token number\">2019</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\nGDP <span class=\"token operator\">&lt;-</span> list<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span>i <span class=\"token keyword\">in</span> <span class=\"token number\">3</span><span class=\"token operator\">:</span><span class=\"token number\">13</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    tmp <span class=\"token operator\">&lt;-</span> as.data.frame<span class=\"token punctuation\">(</span>read_excel<span class=\"token punctuation\">(</span><span class=\"token string\">\"./rgdptables19q430072020113950.xlsx\"</span><span class=\"token punctuation\">,</span>sheet<span class=\"token operator\">=</span>i<span class=\"token punctuation\">,</span> skip<span class=\"token operator\">=</span><span class=\"token number\">8</span><span class=\"token punctuation\">,</span> n_max<span class=\"token operator\">=</span><span class=\"token number\">8</span><span class=\"token punctuation\">,</span> col_names<span class=\"token operator\">=</span><span class=\"token boolean\">FALSE</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token operator\">:</span><span class=\"token number\">24</span><span class=\"token punctuation\">]</span>\n    rownames<span class=\"token punctuation\">(</span>tmp<span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;-</span> Years\n    colnames<span class=\"token punctuation\">(</span>tmp<span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;-</span> SectorName\n\n    GDP<span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span>RegionName<span class=\"token punctuation\">[</span>i<span class=\"token operator\">-</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">&lt;-</span> tmp\n<span class=\"token punctuation\">}</span>\n\nUKRegionGDPbyYear <span class=\"token operator\">&lt;-</span> array<span class=\"token punctuation\">(</span>unlist<span class=\"token punctuation\">(</span>GDP<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                           c<span class=\"token punctuation\">(</span>length<span class=\"token punctuation\">(</span>Years<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> length<span class=\"token punctuation\">(</span>SectorName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> length<span class=\"token punctuation\">(</span>RegionName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                           dimnames <span class=\"token operator\">=</span> list<span class=\"token punctuation\">(</span>Years<span class=\"token punctuation\">,</span> SectorName<span class=\"token punctuation\">,</span> RegionName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># The dimnames is recommanded here.</span>\n</code></pre></div>\n<p>In the final <code class=\"language-text\">UKRegionGDPbyYear</code> object, the first dimension is Years, the second dimension is Sectors, and the third dimension is RegionName. Thus since we know their real-world meanings, we can easily select data we want like, answer questions like:</p>\n<ul>\n<li><strong>What is the \"Education\" sector's GDP in each England region per year?</strong></li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\"><span class=\"token operator\">></span> UKRegionGDPbyYear<span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"Education\"</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">]</span>\n     North East North West Yorkshire and The Humber East Midlands West Midlands\n<span class=\"token number\">2012</span>       <span class=\"token number\">99.5</span>       <span class=\"token number\">94.3</span>                     <span class=\"token number\">92.6</span>         <span class=\"token number\">102.2</span>         <span class=\"token number\">100.6</span>\n<span class=\"token number\">2013</span>       <span class=\"token number\">98.3</span>       <span class=\"token number\">98.4</span>                     <span class=\"token number\">96.6</span>         <span class=\"token number\">103.2</span>         <span class=\"token number\">100.1</span>\n<span class=\"token number\">2014</span>       <span class=\"token number\">96.5</span>       <span class=\"token number\">97.1</span>                     <span class=\"token number\">99.1</span>         <span class=\"token number\">102.9</span>          <span class=\"token number\">99.9</span>\n<span class=\"token number\">2015</span>       <span class=\"token number\">97.1</span>       <span class=\"token number\">98.7</span>                    <span class=\"token number\">102.7</span>         <span class=\"token number\">101.9</span>         <span class=\"token number\">100.4</span>\n<span class=\"token number\">2016</span>      <span class=\"token number\">100.0</span>      <span class=\"token number\">100.0</span>                    <span class=\"token number\">100.0</span>         <span class=\"token number\">100.0</span>         <span class=\"token number\">100.0</span>\n<span class=\"token number\">2017</span>       <span class=\"token number\">96.1</span>      <span class=\"token number\">102.6</span>                     <span class=\"token number\">98.7</span>         <span class=\"token number\">104.5</span>         <span class=\"token number\">103.6</span>\n<span class=\"token number\">2018</span>       <span class=\"token number\">94.1</span>      <span class=\"token number\">102.9</span>                    <span class=\"token number\">101.0</span>         <span class=\"token number\">104.8</span>         <span class=\"token number\">108.1</span>\n<span class=\"token number\">2019</span>       <span class=\"token number\">86.2</span>      <span class=\"token number\">105.3</span>                    <span class=\"token number\">100.8</span>         <span class=\"token number\">113.6</span>         <span class=\"token number\">101.3</span>\n     East of England London South East South West England Wales\n<span class=\"token number\">2012</span>           <span class=\"token number\">102.3</span>   <span class=\"token number\">98.8</span>       <span class=\"token number\">94.0</span>       <span class=\"token number\">94.4</span>    <span class=\"token number\">97.2</span> <span class=\"token number\">100.1</span>\n<span class=\"token number\">2013</span>           <span class=\"token number\">102.5</span>   <span class=\"token number\">98.7</span>       <span class=\"token number\">96.7</span>       <span class=\"token number\">96.8</span>    <span class=\"token number\">98.7</span> <span class=\"token number\">102.0</span>\n<span class=\"token number\">2014</span>            <span class=\"token number\">98.2</span>  <span class=\"token number\">103.2</span>       <span class=\"token number\">95.6</span>       <span class=\"token number\">97.8</span>    <span class=\"token number\">99.2</span>  <span class=\"token number\">99.3</span>\n<span class=\"token number\">2015</span>            <span class=\"token number\">98.1</span>  <span class=\"token number\">105.4</span>       <span class=\"token number\">98.3</span>       <span class=\"token number\">97.6</span>   <span class=\"token number\">100.6</span>  <span class=\"token number\">99.7</span>\n<span class=\"token number\">2016</span>           <span class=\"token number\">100.0</span>  <span class=\"token number\">100.0</span>      <span class=\"token number\">100.0</span>      <span class=\"token number\">100.0</span>   <span class=\"token number\">100.0</span> <span class=\"token number\">100.0</span>\n<span class=\"token number\">2017</span>            <span class=\"token number\">99.9</span>  <span class=\"token number\">102.8</span>      <span class=\"token number\">100.9</span>       <span class=\"token number\">99.4</span>   <span class=\"token number\">101.4</span>  <span class=\"token number\">98.3</span>\n<span class=\"token number\">2018</span>           <span class=\"token number\">103.4</span>  <span class=\"token number\">104.6</span>       <span class=\"token number\">98.8</span>       <span class=\"token number\">98.0</span>   <span class=\"token number\">102.2</span>  <span class=\"token number\">95.1</span>\n<span class=\"token number\">2019</span>           <span class=\"token number\">111.2</span>  <span class=\"token number\">113.4</span>      <span class=\"token number\">103.5</span>       <span class=\"token number\">98.5</span>   <span class=\"token number\">105.7</span> <span class=\"token number\">100.6</span></code></pre></div>\n<ul>\n<li><strong>What is London's GDP in the \"Arts\" sector in 2012-2015 ?</strong></li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\"><span class=\"token operator\">></span> UKRegionGDPbyYear<span class=\"token punctuation\">[</span>c<span class=\"token punctuation\">(</span><span class=\"token string\">\"2012\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"2013\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"2014\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"2015\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"Arts\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"London\"</span><span class=\"token punctuation\">]</span>\n<span class=\"token number\">2012</span> <span class=\"token number\">2013</span> <span class=\"token number\">2014</span> <span class=\"token number\">2015</span>\n<span class=\"token number\">89.4</span> <span class=\"token number\">88.5</span> <span class=\"token number\">93.3</span> <span class=\"token number\">99.0</span>\n<span class=\"token operator\">></span></code></pre></div>\n<ul>\n<li><strong>What is London's top 5 GDP sector in 2019?</strong></li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\"><span class=\"token operator\">></span> sort<span class=\"token punctuation\">(</span>UKRegionGDPbyYear<span class=\"token punctuation\">[</span><span class=\"token string\">\"2019\"</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"London\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>decreasing<span class=\"token operator\">=</span><span class=\"token boolean\">TRUE</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token operator\">:</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span>\n                                            Mining <span class=\"token operator\">&amp;</span> quarrying\n                                                         <span class=\"token number\">168.5</span>\n                                 Information and Communication\n                                                         <span class=\"token number\">122.2</span>\n                 Administrative and support service activities\n                                                         <span class=\"token number\">118.4</span>\nWholesale and retail<span class=\"token operator\">:</span> repair of motor vehicles and motorcycles\n                                                         <span class=\"token number\">116.7</span>\n                                                   Agriculture\n                                                         <span class=\"token number\">114.9</span>\n<span class=\"token operator\">></span></code></pre></div>\n<p>In short, when you create a multiple dimension array with some real-world thing represented (and named in dimensions). It would be easier to use.</p>","frontmatter":{"date":"March 06, 2021","slug":"/notes/Deeper-look-of-multiple-dimension-array()-and-apply()-in-R","title":"Deeper look of multiple dimension array() and apply() in R","tags":["R"],"abstract":"Recently my wife asked a question that how to understand 3-dimension array in R. And How to understand the apply() function when it is applied on multi-dimension array. After digging further, I think it is really interesing..."}}},"pageContext":{"slug":"/notes/Deeper-look-of-multiple-dimension-array()-and-apply()-in-R"}},
    "staticQueryHashes": []}