{
    "componentChunkName": "component---src-templates-note-template-js",
    "path": "/notes/Coursera---Regression-Models",
    "result": {"data":{"markdownRemark":{"html":"<p>I am following the <a href=\"https://www.coursera.org/learn/regression-models\">Regression Model Course on Coursera</a>. This note is just a collection of high-dense knowledge I absorbed from the course, and my understanding/key-code .etc. A super-mini summary. Also, One book I should read along with the course is <a href=\"https://leanpub.com/regmods\">this one</a> (maybe later one day 😅), which can be freely downloaded.</p>\n<p>Why we still need to learn regression in nowadays where machine learning (ML) is surging up? One key advantage of regression against machine learning is the highly interpretable model fits.</p>\n<h2>Some Types of Regressions</h2>\n<p>Three common concepts: <strong>Least Squares Regression (LSR)</strong>, <strong>Multivariable Regression (MVR)</strong> and <strong>Generalized Linear Models (GLM)</strong>. The difference between them is subtle:</p>\n<ul>\n<li><code class=\"language-text\">Least Squares Regression</code> seems most commonly represents the situation fitting one dependent variable (y) with one independent variable (x) with a <strong>straight line</strong>. The key is to find the minium residual (quite intuitive). I personally think this principle also works even if we have multiple x, however, according to some posts like <a href=\"https://www.real-statistics.com/multiple-regression/least-squares-method-multiple-regression/\">this</a> and <a href=\"https://stats.stackexchange.com/a/2363\">this</a>, if there are multiple x but only one y in a Least Squares Regression, it should be called as \"Multiple Regression\"...</li>\n<li><code class=\"language-text\">MultiVariable Regression</code> seems to represent the situation that there are multiple dependent and 1-N independent variables, when compared with the Multiple Regression concept above.</li>\n<li><code class=\"language-text\">Generalized Linear Models</code> seems like it could represent other models more than straight lines, for example, <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi><mo>=</mo><msub><mi>b</mi><mn>1</mn></msub><msubsup><mi>x</mi><mn>1</mn><mn>2</mn></msubsup><mo>+</mo><msub><mi>b</mi><mn>2</mn></msub><msub><mi>x</mi><mn>2</mn></msub><mo>∗</mo><mn>3...</mn></mrow><annotation encoding=\"application/x-tex\">y = b_1x_1^2 + b_2x_2*3...</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.0622159999999998em;vertical-align:-0.24810799999999997em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">b</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-2.4518920000000004em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.24810799999999997em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">b</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">∗</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">3...</span></span></span></span></span>. According to ChatGPT, GLM does not require data distributions, normalisation .etc, which I am not sure about yet...</li>\n</ul>\n<h2>Basic Notions</h2>\n<p><strong>Empirical Variance</strong>: The equation for variant is <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>S</mi><mn>2</mn></msup><mo>=</mo><mi>s</mi><mi>u</mi><mi>m</mi><mo stretchy=\"false\">(</mo><mo stretchy=\"false\">(</mo><mi>x</mi><mo>−</mo><mi>m</mi><mi>e</mi><mi>a</mi><mi>n</mi><msup><mo stretchy=\"false\">)</mo><mn>2</mn></msup><mo stretchy=\"false\">)</mo><mi mathvariant=\"normal\">/</mi><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">S^2 = sum((x - mean)^2) / n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141079999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\">u</span><span class=\"mord mathnormal\">m</span><span class=\"mopen\">((</span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.064108em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">m</span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\">an</span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mord\">/</span><span class=\"mord mathnormal\">n</span></span></span></span></span>, while <strong>empirical variance</strong> is <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>S</mi><mn>2</mn></msup><mo>=</mo><mi>s</mi><mi>u</mi><mi>m</mi><mo stretchy=\"false\">(</mo><mo stretchy=\"false\">(</mo><mi>x</mi><mo>−</mo><mi>m</mi><mi>e</mi><mi>a</mi><mi>n</mi><msup><mo stretchy=\"false\">)</mo><mn>2</mn></msup><mo stretchy=\"false\">)</mo><mi mathvariant=\"normal\">/</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">S^2 = sum((x - mean)^2) / (n - 1)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141079999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\">u</span><span class=\"mord mathnormal\">m</span><span class=\"mopen\">((</span><span class=\"mord mathnormal\">x</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.064108em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">m</span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\">an</span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mord\">/</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">n</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mclose\">)</span></span></span></span></span>. They are so similar but not exactly the same. And there is \"empirical standard deviation\" as <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">S</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span></span></span></span></span>. According to the lecture, SD is better to be used them normal variance, as variance represent the squared value of the data.</p>\n<p><strong>Centering</strong>: For a group of data, each value subtracts the mean value. <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>X</mi><mrow><mi>c</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>e</mi><mi>r</mi><mi>i</mi><mi>n</mi><mi>g</mi></mrow></msub><mo>=</mo><msub><mi>X</mi><mi>i</mi></msub><mo>−</mo><mover accent=\"true\"><mi>X</mi><mo>ˉ</mo></mover></mrow><annotation encoding=\"application/x-tex\"> X_{centering} = X_i - \\bar{X}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.969438em;vertical-align:-0.286108em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">ce</span><span class=\"mord mathnormal mtight\">n</span><span class=\"mord mathnormal mtight\">t</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">er</span><span class=\"mord mathnormal mtight\">in</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">g</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8201099999999999em;vertical-align:0em;\"></span><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8201099999999999em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span></span><span style=\"top:-3.25233em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.16666em;\"><span class=\"mord\">ˉ</span></span></span></span></span></span></span></span></span></span></span>. So after centring, their mean value is 0.</p>\n<p><strong>Scaling</strong>: For a group of data, each value divide by the SD. <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>X</mi><mrow><mi>s</mi><mi>c</mi><mi>a</mi><mi>l</mi><mi>i</mi><mi>n</mi><mi>g</mi></mrow></msub><mo>=</mo><msub><mi>X</mi><mi>i</mi></msub><mi mathvariant=\"normal\">/</mi><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">X_{scaling} = X_i / S</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.969438em;vertical-align:-0.286108em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3361079999999999em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">sc</span><span class=\"mord mathnormal mtight\">a</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal mtight\">in</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">g</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\">/</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span></span></span></span></span>. So the \"scaled\" data will have SD as 1.</p>\n<p><strong>Normalisation</strong>: For a group of data, substract the mean, then devide by SD, we can new data with 0 as mean and 1 as SD. equation is this <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>X</mi><mrow><mi>n</mi><mi>o</mi><mi>r</mi><mi>m</mi><mi>a</mi><mi>l</mi><mi>i</mi><mi>s</mi><mi>a</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi></mrow></msub><mo>=</mo><mo stretchy=\"false\">(</mo><msub><mi>X</mi><mi>i</mi></msub><mo>−</mo><mover accent=\"true\"><mi>X</mi><mo>ˉ</mo></mover><mo stretchy=\"false\">)</mo><mi mathvariant=\"normal\">/</mi><mi>S</mi></mrow><annotation encoding=\"application/x-tex\">X_{normalisation} = (X_i - \\bar{X})/S</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.02778em;\">or</span><span class=\"mord mathnormal mtight\">ma</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal mtight\">i</span><span class=\"mord mathnormal mtight\">s</span><span class=\"mord mathnormal mtight\">a</span><span class=\"mord mathnormal mtight\">t</span><span class=\"mord mathnormal mtight\">i</span><span class=\"mord mathnormal mtight\">o</span><span class=\"mord mathnormal mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.07011em;vertical-align:-0.25em;\"></span><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8201099999999999em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span></span><span style=\"top:-3.25233em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.16666em;\"><span class=\"mord\">ˉ</span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mord\">/</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span></span></span></span></span>. A good and simple way to understand normalised data is: If a data value is 2 after normalisation, this value is twice larger than the mean value in the original data. One value important functionality of normalisation is to make non-comparable data comparable.</p>\n<blockquote>\n<p>I guess normalisation is the most useful tool. Maybe worth looking up the different usage of centering, scaling and normalisation one day.</p>\n</blockquote>\n<p><strong>Empirical Covariance</strong>: <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>C</mi><mi>o</mi><mi>v</mi><mo stretchy=\"false\">(</mo><mi>X</mi><mo separator=\"true\">,</mo><mi>Y</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mfrac><mn>1</mn><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow></mfrac><msubsup><mo>∑</mo><mrow><mi>n</mi><mo>=</mo><mi>i</mi></mrow><mi>n</mi></msubsup><mrow><mo stretchy=\"false\">(</mo><msub><mi>X</mi><mi>i</mi></msub><mo>−</mo><mover accent=\"true\"><mi>X</mi><mo>ˉ</mo></mover><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">(</mo><msub><mi>Y</mi><mi>i</mi></msub><mo>−</mo><mover accent=\"true\"><mi>Y</mi><mo>ˉ</mo></mover><mo stretchy=\"false\">)</mo></mrow></mrow><annotation encoding=\"application/x-tex\">Cov(X, Y) = \\frac{1}{n-1}\\sum_{n=i}^{n}{(X_i - \\bar{X})(Y_i - \\bar{Y})}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span><span class=\"mord mathnormal\">o</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">Y</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.2484389999999999em;vertical-align:-0.403331em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.845108em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.403331em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:-0.0000050000000000050004em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.804292em;\"><span style=\"top:-2.40029em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span><span class=\"mrel mtight\">=</span><span class=\"mord mathnormal mtight\">i</span></span></span></span><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.29971000000000003em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8201099999999999em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span></span><span style=\"top:-3.25233em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.16666em;\"><span class=\"mord\">ˉ</span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">Y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8201099999999999em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">Y</span></span><span style=\"top:-3.25233em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.25em;\"><span class=\"mord\">ˉ</span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span></span></span>. Intuitively, it means for two matched list, if <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>X</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">X_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span> is large, <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>Y</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">Y_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">Y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span> is large, then their multiply would be positively very large. In another word, the two lists of data shall have the same \"trend\" up or down.</p>\n<p><strong>Correlation:</strong> <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>C</mi><mi>o</mi><mi>r</mi><mo stretchy=\"false\">(</mo><mi>X</mi><mo separator=\"true\">,</mo><mi>Y</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mfrac><mrow><mi>C</mi><mi>o</mi><mi>v</mi><mo stretchy=\"false\">(</mo><mi>X</mi><mo separator=\"true\">,</mo><mi>Y</mi><mo stretchy=\"false\">)</mo></mrow><mrow><msub><mi>S</mi><mi>x</mi></msub><msub><mi>S</mi><mi>y</mi></msub></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">Cor(X, Y) = \\frac{Cov(X, Y)}{S_xS_y}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">or</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">Y</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.55232em;vertical-align:-0.5423199999999999em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.01em;\"><span style=\"top:-2.655em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05764em;\">S</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.16454285714285719em;\"><span style=\"top:-2.357em;margin-left:-0.05764em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\">x</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05764em;\">S</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.16454285714285716em;\"><span style=\"top:-2.357em;margin-left:-0.05764em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">y</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2818857142857143em;\"><span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.485em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.07153em;\">C</span><span class=\"mord mathnormal mtight\">o</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03588em;\">v</span><span class=\"mopen mtight\">(</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.07847em;\">X</span><span class=\"mpunct mtight\">,</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.22222em;\">Y</span><span class=\"mclose mtight\">)</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.5423199999999999em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span>. I thinks is the \"scaled\" version of Covariance, since it has been restricted into -1 and 1, so any two list of data (no matter what data range) can be used to find correlation status.</p>\n<blockquote>\n<p>In R, correlation function is <code class=\"language-text\">cor(x, y)</code>, and covariance function is <code class=\"language-text\">cov(x, y)</code>. I think I actually never use the covariance function at all...</p>\n</blockquote>\n<h2>The Famous Linear Least Squares</h2>\n<p>The most famous and commonly used regression, I intuitively understand the principle of this regression method, which is to minimize below euqation:</p>\n<div class=\"math math-display\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mstyle scriptlevel=\"0\" displaystyle=\"true\"><munderover><mo>∑</mo><mrow><mi>i</mi><mo>−</mo><mn>1</mn></mrow><mi>n</mi></munderover><mrow><mo stretchy=\"false\">(</mo><msub><mi>Y</mi><mi>i</mi></msub><mo>−</mo><mo stretchy=\"false\">(</mo><msub><mi>B</mi><mn>0</mn></msub><mo>+</mo><msub><mi>B</mi><mn>1</mn></msub><msub><mi>X</mi><mi>i</mi></msub><mo stretchy=\"false\">)</mo><msup><mo stretchy=\"false\">)</mo><mn>2</mn></msup></mrow></mstyle></mrow><annotation encoding=\"application/x-tex\">\\displaystyle\\sum_{i-1}^{n}{(Y_i - (B_0 + B_1X_i))^2}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:2.9873970000000005em;vertical-align:-1.336em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.6513970000000002em;\"><span style=\"top:-1.8723309999999997em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mbin mtight\">−</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.0500049999999996em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span><span style=\"top:-4.300005em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.336em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">Y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">B</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.05017em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">B</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.05017em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641079999999999em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span></span></span></div>\n<p>This is so important and easy to understand. Also, importantly, this equation also should works for higher dimensions, like 3 or more variables, by minimise the difference between real value <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>Y</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">Y_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">Y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span> and \"model predicted value\" <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">(</mo><msub><mi>B</mi><mn>0</mn></msub><mo>+</mo><msub><mi>B</mi><mn>1</mn></msub><msub><mi>X</mi><mi>i</mi></msub><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">(B_0 + B_1X_i)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">B</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.05017em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">B</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.05017em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span></span>. For simple two-variable regression, there is already equation for final result below:</p>\n<div class=\"math math-display\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mover accent=\"true\"><msub><mi>B</mi><mn>1</mn></msub><mo>^</mo></mover><mo>=</mo><mi>C</mi><mi>o</mi><mi>r</mi><mo stretchy=\"false\">(</mo><mi>Y</mi><mo separator=\"true\">,</mo><mi>X</mi><mo stretchy=\"false\">)</mo><mfrac><mrow><mi>S</mi><mi>D</mi><mo stretchy=\"false\">(</mo><mi>Y</mi><mo stretchy=\"false\">)</mo></mrow><mrow><mi>S</mi><mi>D</mi><mo stretchy=\"false\">(</mo><mi>X</mi><mo stretchy=\"false\">)</mo></mrow></mfrac></mrow><annotation encoding=\"application/x-tex\">\\hat{B_1} = Cor(Y, X) \\frac{SD(Y)}{SD(X)}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.0967699999999998em;vertical-align:-0.15em;\"></span><span class=\"mord accent\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9467699999999999em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">B</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.05017em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span><span style=\"top:-3.25233em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.25em;\"><span class=\"mord\">^</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.363em;vertical-align:-0.936em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">or</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">Y</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"mclose\">)</span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.427em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"mclose\">)</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">Y</span><span class=\"mclose\">)</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.936em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span></div>\n<p>In the course, I just know that:</p>\n<ol>\n<li>\n<p>It represents that the slope (<span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>B</mi><mn>1</mn></msub></mrow><annotation encoding=\"application/x-tex\">B_1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">B</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.05017em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span>) has the unit of <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>Y</mi><mi mathvariant=\"normal\">/</mi><mi>X</mi></mrow><annotation encoding=\"application/x-tex\">Y/X</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">Y</span><span class=\"mord\">/</span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span></span></span></span></span>, for example, you regression house-price with car-price, their unit varis a lot initially (Millions to Thousand), but still the regression will work, because <strong>the slope contains the difference between the two units. In another word, the slope represent the increment of unit of Y, when 1 unit of X increased.</strong></p>\n</li>\n<li>\n<p>Centering will not change the regression result, because centering just change the mean, not the SD, and slope is decided by the SD (difference between unit).</p>\n</li>\n<li>\n<p>If we do normalisation for both X and Y, then do regression, both two new data have 0 as mean and 1 and SD, the slope would not be the original one, instead it will be the <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>C</mi><mi>o</mi><mi>r</mi><mo stretchy=\"false\">(</mo><mi>Y</mi><mo separator=\"true\">,</mo><mi>X</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">Cor(Y, X)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">or</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">Y</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"mclose\">)</span></span></span></span></span>. Intuitively, I can understand that after normalisation, both two data list are around 0 point, and with same SD, thus the slope we can estimate then just represent some changing of angles between them...</p>\n</li>\n</ol>\n<blockquote>\n<p>The regression function for R is <code class=\"language-text\">lm(y ~ x)</code>, by default it includes a intercept. Then we use <code class=\"language-text\">summary</code> or <code class=\"language-text\">coef</code> function to get slopes.</p>\n<p>In ggplot2, to code to add regression line into plot is <code class=\"language-text\">g + geom_smooth(method=\"lm\", formula=y~x)</code></p>\n<p>To put all variables into the regression model, use <code class=\"language-text\">lm(y ~ ., data=dataset)</code>.</p>\n</blockquote>\n<h2>Residuals</h2>\n<p>For a long time, I only know about the slope, but not very sure about those residuals. Firstly there is a concept here, residuals are in theory, not errors, errors are unobservable among population, thus we use residual as an estimation of error. In most case, the mean of residuals is 0, because we assume in nature, errors are normal distributed.</p>\n<p><strong>Residuals are useful for investigating poor model fit.</strong></p>\n<p>Also, <strong>residuals can be seen as the outcome of Y, with linear association of predictor(X) removed.</strong> This is the principle to use regression to remove the cell type effect. The the coursera, the author said it's very common to use this method, to remove a effect of X, and get the new outcome of Y, which contains other information.</p>\n<p>Finally, residual variance somewhat represents the model bias or not. Then, the lecture shows some key figures from residual for regression diagnose.</p>\n<p>The R function to get residual is <code class=\"language-text\">resid()</code>.\n<br>\nCompared with an intuitive solution that draw residual along the line, a better way to draw a plot is like below, which shows the variation of residual along the whole X. Blow are three figures can be used for residual analysis:</p>\n<div>\n<div style=\"display:inline-block; width: 30%; margin: 10px\">\n<p><img src=\"https://raw.githubusercontent.com/bcaffo/courses/master/07_RegressionModels/01_06_residualVariation/assets/fig/unnamed-chunk-1.png\" alt=\"Regression line Plot\"></p>\n</div>\n<div style=\"display:inline-block; width: 30%; margin: 10px\">\n<p><img src=\"https://raw.githubusercontent.com/bcaffo/courses/master/07_RegressionModels/01_06_residualVariation/assets/fig/unnamed-chunk-4.png\" alt=\"Residual Plot\"></p>\n</div>\n<div style=\"display:inline-block; width: 30%; margin: 10px\">\n<p><img src=\"https://raw.githubusercontent.com/bcaffo/courses/master/07_RegressionModels/01_06_residualVariation/assets/fig/unnamed-chunk-10.png\" alt=\"Scatter Plot\"></p>\n</div>\n</div>\n<p>The first one (left) shows us if the regression line match the data well. The second one shows us if the residuals are normal distributed, if not, there could be other hidden patterns inside. The third one shows we how many variants were explained by the current X since the left boxplot is residual against the mean value.</p>\n<p>The above figure is a typical normal distributed regression line, which is good. However, in many cases, by using the above residual plot, we can find some pattern indicates there are other patterns in the data. For example, the below figure shows that the apart from regression model, there could have some other model hidden behind the data.</p>\n<div style=\"text-align: center\">\n<p><img src=\"https://raw.githubusercontent.com/bcaffo/courses/master/07_RegressionModels/01_06_residualVariation/assets/fig/unnamed-chunk-8.png\" alt=\"sparsed residual plot\"></p>\n</div>\n<p>So, the above residual come from a code like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\"><span class=\"token comment\"># The SD of y is larged with larger X.</span>\nx <span class=\"token operator\">&lt;-</span> runif<span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> y <span class=\"token operator\">&lt;-</span> x <span class=\"token operator\">+</span> rnorm<span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">,</span> mean <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> sd <span class=\"token operator\">=</span> <span class=\"token number\">0.001</span> <span class=\"token operator\">*</span> x<span class=\"token punctuation\">)</span></code></pre></div>\n<p>A metrics for residual is <strong>residual variation</strong>, which is <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mfrac><mn>1</mn><mi>n</mi></mfrac><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></msubsup><msubsup><mi>e</mi><mi>i</mi><mn>2</mn></msubsup></mrow><annotation encoding=\"application/x-tex\">\\frac{1}{n}\\sum_{i=1}^{n}e_{i}^{2}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.190108em;vertical-align:-0.345em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.845108em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:-0.0000050000000000050004em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.804292em;\"><span style=\"top:-2.40029em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.29971000000000003em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">e</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-2.441336em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.258664em;\"><span></span></span></span></span></span></span></span></span></span></span>. It's a metrics to estimate the \"nice\" of regression model, this value is also called \"sigma\"(<span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>σ</mi></mrow><annotation encoding=\"application/x-tex\">\\sigma</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">σ</span></span></span></span></span>). In R, below result can see in <code class=\"language-text\">summary()</code> function.</p>\n<p>Then, here comes another important metric, <strong>R Squared</strong>. So what is R2 exactly? It represent the fraction of variability explained by X and explained by Residual (error).</p>\n<div class=\"math math-display\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><mo stretchy=\"false\">(</mo><msub><mi>Y</mi><mi>i</mi></msub><mo>−</mo><mover accent=\"true\"><mi>Y</mi><mo>ˉ</mo></mover><msup><mo stretchy=\"false\">)</mo><mn>2</mn></msup><mo>=</mo><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><mo stretchy=\"false\">(</mo><msub><mi>Y</mi><mi>i</mi></msub><mo>−</mo><msub><mover accent=\"true\"><mi>Y</mi><mo>^</mo></mover><mi>i</mi></msub><msup><mo stretchy=\"false\">)</mo><mn>2</mn></msup><mo>+</mo><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><mo stretchy=\"false\">(</mo><msub><mover accent=\"true\"><mi>Y</mi><mo>^</mo></mover><mi>i</mi></msub><mo>−</mo><mover accent=\"true\"><mi>Y</mi><mo>ˉ</mo></mover><msup><mo stretchy=\"false\">)</mo><mn>2</mn></msup></mrow><annotation encoding=\"application/x-tex\">\\sum_{i=1}^{n}(Y_i - \\bar{Y})^2 = \\sum_{i=1}^{n}(Y_i-\\hat{Y}_i)^2 + \\sum_{i=1}^{n}(\\hat{Y}_i - \\bar{Y})^2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:2.929066em;vertical-align:-1.277669em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.6513970000000002em;\"><span style=\"top:-1.872331em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.050005em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span><span style=\"top:-4.3000050000000005em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.277669em;\"><span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">Y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.1141079999999999em;vertical-align:-0.25em;\"></span><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8201099999999999em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">Y</span></span><span style=\"top:-3.25233em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.25em;\"><span class=\"mord\">ˉ</span></span></span></span></span></span></span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641079999999999em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.929066em;vertical-align:-1.277669em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.6513970000000002em;\"><span style=\"top:-1.872331em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.050005em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span><span style=\"top:-4.3000050000000005em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.277669em;\"><span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">Y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.19677em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9467699999999999em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">Y</span></span><span style=\"top:-3.25233em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.25em;\"><span class=\"mord\">^</span></span></span></span></span></span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641079999999999em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.929066em;vertical-align:-1.277669em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.6513970000000002em;\"><span style=\"top:-1.872331em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.050005em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span><span style=\"top:-4.3000050000000005em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.277669em;\"><span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9467699999999999em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">Y</span></span><span style=\"top:-3.25233em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.25em;\"><span class=\"mord\">^</span></span></span></span></span></span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.1141079999999999em;vertical-align:-0.25em;\"></span><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8201099999999999em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">Y</span></span><span style=\"top:-3.25233em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.25em;\"><span class=\"mord\">ˉ</span></span></span></span></span></span></span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641079999999999em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span></span></div>\n<p>In the equation, the left represent all the variable each Y have, against the mean Y. The middle part represent <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>σ</mi></mrow><annotation encoding=\"application/x-tex\">\\sigma</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">σ</span></span></span></span></span>, the variant explained by error. And the right side is variant explained by X.</p>\n<p>So, in our model, we hope that X could be strongly related with Y, in other word, most of the value variant in Y can be explained by X, thus, the higher fraction of variant explained by X (when compared with explained error), the better.</p>\n<p>The above is an intuitive explanation for R2. And since it's faction, the R2 must be between 0 and 1. Though it looks like the higher R2 is, the better model we get. However, the below figure shows that even totaly wrong and improper regressions can have the same R2 score. Thus, R2 is just one metric, but not the only one we can reply one in regression model assessment.</p>\n<div style=\"text-align: center\">\n<p><img src=\"https://raw.githubusercontent.com/bcaffo/courses/master/07_RegressionModels/01_06_residualVariation/assets/fig/unnamed-chunk-12.png\" alt=\"R2\"></p>\n</div>\n<blockquote>\n<p>Note that, even if your regression model does not perfect fit the origin data, for example you can clearly see a hidden pattern in residual, regression still have value since it captured a certain level of trend in origin data.</p>\n</blockquote>\n<h2>Inference in Regression</h2>\n<p>The inference is the step of drawing a conclusion. Basically, it means for example hypothesis validation. We can get some inferences from those parameters. For example, the variance of <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>B</mi><mn>1</mn></msub></mrow><annotation encoding=\"application/x-tex\">B_1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">B</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.05017em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span> can be expressed as below, which represent the \"confidential\" of our estimated <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>B</mi><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">B1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">B</span><span class=\"mord\">1</span></span></span></span></span>.</p>\n<div class=\"math math-display\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><msubsup><mi>σ</mi><msub><mover accent=\"true\"><mi>B</mi><mo>^</mo></mover><mn>1</mn></msub><mn>2</mn></msubsup><mo>=</mo><mi>V</mi><mi>a</mi><mi>r</mi><mo stretchy=\"false\">(</mo><msub><mover accent=\"true\"><mi>B</mi><mo>^</mo></mover><mn>1</mn></msub><mo stretchy=\"false\">)</mo><mo>=</mo><msup><mi>σ</mi><mn>2</mn></msup><mi mathvariant=\"normal\">/</mi><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><mo stretchy=\"false\">(</mo><msub><mi>X</mi><mi>i</mi></msub><mo>−</mo><mover accent=\"true\"><mi>X</mi><mo>ˉ</mo></mover><msup><mo stretchy=\"false\">)</mo><mn>2</mn></msup></mrow><annotation encoding=\"application/x-tex\">\\sigma_{\\hat{B}_1}^{2} = Var(\\hat{B}_1) = \\sigma^2 / \\sum_{i=1}^n (X_i - \\bar{X})^2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.3739469999999998em;vertical-align:-0.5098389999999998em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">σ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641079999999999em;\"><span style=\"top:-2.290261em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mord accent mtight\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9467699999999999em;\"><span style=\"top:-2.7em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05017em;\">B</span></span><span style=\"top:-2.9523300000000003em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"accent-body\" style=\"left:-0.16666em;\"><span class=\"mord mtight\">^</span></span></span></span></span></span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31731428571428577em;\"><span style=\"top:-2.357em;margin-left:-0.05017em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.5em;\"></span><span class=\"sizing reset-size3 size1 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.143em;\"><span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.5098389999999998em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.19677em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">Va</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9467699999999999em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05017em;\">B</span></span><span style=\"top:-3.25233em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.16666em;\"><span class=\"mord\">^</span></span></span></span></span></span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.05017em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.929066em;vertical-align:-1.277669em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">σ</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641079999999999em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mord\">/</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.6513970000000002em;\"><span style=\"top:-1.872331em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.050005em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span><span style=\"top:-4.3000050000000005em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.277669em;\"><span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.1141079999999999em;vertical-align:-0.25em;\"></span><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8201099999999999em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span></span><span style=\"top:-3.25233em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.16666em;\"><span class=\"mord\">ˉ</span></span></span></span></span></span></span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641079999999999em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span></span></div>\n<p>So, how to intuitively understand it? Firstly, the <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>σ</mi><mn>2</mn></msup></mrow><annotation encoding=\"application/x-tex\">\\sigma^2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141079999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">σ</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span></span> represents the variant of error, the smaller this value is, it means most dots <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>Y</mi></mrow><annotation encoding=\"application/x-tex\">Y</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">Y</span></span></span></span></span> are close to the regression line we get, Like below example:</p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\"><span class=\"token operator\">></span> library<span class=\"token punctuation\">(</span><span class=\"token string\">\"ggplot2\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">></span> A <span class=\"token operator\">&lt;-</span> data.frame<span class=\"token punctuation\">(</span>x<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token operator\">:</span><span class=\"token number\">100</span><span class=\"token punctuation\">,</span> y<span class=\"token operator\">=</span>rnorm<span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token operator\">:</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">></span> ggplot<span class=\"token punctuation\">(</span>A<span class=\"token punctuation\">,</span> aes<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> \n    geom_point<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> \n    geom_smooth<span class=\"token punctuation\">(</span>method<span class=\"token operator\">=</span><span class=\"token string\">\"lm\"</span><span class=\"token punctuation\">,</span> aes<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span>\n    geom_smooth<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">></span>\n<span class=\"token operator\">></span> A <span class=\"token operator\">&lt;-</span> data.frame<span class=\"token punctuation\">(</span>x<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token operator\">:</span><span class=\"token number\">100</span><span class=\"token punctuation\">,</span> y<span class=\"token operator\">=</span>rnorm<span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">40</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token operator\">:</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">></span> ggplot<span class=\"token punctuation\">(</span>A<span class=\"token punctuation\">,</span> aes<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> \n    geom_point<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> \n    geom_smooth<span class=\"token punctuation\">(</span>method<span class=\"token operator\">=</span><span class=\"token string\">\"lm\"</span><span class=\"token punctuation\">,</span> aes<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span>\n    geom_smooth<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">></span> </code></pre></div>\n<p>In the below plot, the two regression lines have the same slope (1), but the left one has a smaller error variance (<span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>σ</mi><mn>2</mn></msup></mrow><annotation encoding=\"application/x-tex\">\\sigma^2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141079999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">σ</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span></span>), while the right one has a larger one. <strong>This is the intuitive explanation of the <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>σ</mi><mn>2</mn></msup></mrow><annotation encoding=\"application/x-tex\">\\sigma^2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141079999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">σ</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span></span> in above equation, smaller error variance means higher confidence for the slope.</strong></p>\n<div>\n<div style=\"display:inline-block; width: 40%; margin: 10px\">\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 687px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e81390936e9fbfcc73814dc96f06f131/aec65/small_error_sigma.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 81.6%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB00lEQVQ4y4VU21LqQBDM/3/QefHhnAf1SBQREBVibphN9pINtwKqgNDWLGS5GORhKsyE6XTP9K4DANPpFEop5HluQ2t9NafgnIMLASk4lJJwCHAymUBQUUob9IHfcgohpAFMki88PfcQDxM4m80Go9HINtVF3bskYRjGEdI0w22jh9uHrmHurNdrFEVR23TM7LSWQ+cS7/0A/+5e0XkdQIpsB3hV8pFUkqjzHFEUovMW4eGpjzCKoZQw/WmaHgDPgc5npnUBITL0Bz7u3A903wKTp4why7hV4KxWKyP55+xyu3kCDAMfrfYH3JYP7zNEFAb2Y/QfC7hcLi9K5kYGg+d5cJ8HuHd7hpEQ3Gz3fOsG8Kfkal4CSnJ4fmwG74cJtFZgjFlWx0CW4Xa7xXg83gHsi1qTeRWabQ/NdmCsoaQ4WVCdL89mmJtGWn88ZHBbn2i+9M2sOM/Aubjo0xOGleSdWYf432jjz00Dne47UvYFxtKLvqyVTIAkOQhCO3g6SsRKysOWfwM8kVyWpZF88/fR2KLQh0uizuiXAC1DAiSGdDY5T80NUr08vl2uhdp70UimxdAlsSlL86TzvVgsUO5zitlsZur0m+rk36qvyufzOb4Be46rZK7mVrsAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"small error sigma\"\n        title=\"small error sigma\"\n        src=\"/static/e81390936e9fbfcc73814dc96f06f131/aec65/small_error_sigma.png\"\n        srcset=\"/static/e81390936e9fbfcc73814dc96f06f131/63868/small_error_sigma.png 250w,\n/static/e81390936e9fbfcc73814dc96f06f131/0b533/small_error_sigma.png 500w,\n/static/e81390936e9fbfcc73814dc96f06f131/aec65/small_error_sigma.png 687w\"\n        sizes=\"(max-width: 687px) 100vw, 687px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n</div>\n<div style=\"display:inline-block; width: 40%; margin: 10px\">\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 687px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7a79d156d34e08dba59d08463aaf9793/aec65/large_error_sigma.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 81.6%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAACDElEQVQ4y41U2XIaMRDk//+HhzgVO8YuIDEBEw6XF8yxh6S9OIsbql09RHiBcpKHKc1IO033tEQOAJbLJZIkQZqmEjb/bGXEcQyt9dV+br/fYzKZIIqis2DD3+ooiq/OuOYOhwOm06kUn4X9OBtkRYae52E4HEotgJS8WCwQhuE/GdowxkApJfsmDBEoBRX4SNPkXHK2yf5AkqaSE4BrEATwPF/mFYYGRgdw3SHKP6vwffUBeCnHdV0MBgMBYk0w7nmeizgOobVCq/2Kh2IN+ZsSvt6WEQTqQzIbrUyy4HwoRXKlMBmnAtLru3iqtpG/KeLuoYpftRd0Ol1hSca51Wolpiitj1KjSMAJOB4lGI9SNJttVGoveCw38e2+ivJTA0PXg+97CI2S2dF1zvbo8mwqBdkMBj0kcSTuPTccFIp1FEpNYfXqdGGMRmi0fMuerGkczUky5XTf3lAsV3F7X8H3xzqKP37D6fTFQWPU0QRxWMtKEOu2nb8AzudzVKot5L+UcFeooNFyhInRCqM0lQbX806Msi+EuTXuBDibzfBcb8JxHAHp93viKD+g08wJoP/M2ZpHIGvmGUNKJiN7qPVxnr7vXzVkL7yVnZ2jmEKGBGBk7yLvnpWZfYLZmV0+iNNbvpyNBbX1/4ZI5mvZbDYgOPPdbid/abbmSuO2263kjPV6LbU9533m6N4BMweoDMyQ+T8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"large error sigma\"\n        title=\"large error sigma\"\n        src=\"/static/7a79d156d34e08dba59d08463aaf9793/aec65/large_error_sigma.png\"\n        srcset=\"/static/7a79d156d34e08dba59d08463aaf9793/63868/large_error_sigma.png 250w,\n/static/7a79d156d34e08dba59d08463aaf9793/0b533/large_error_sigma.png 500w,\n/static/7a79d156d34e08dba59d08463aaf9793/aec65/large_error_sigma.png 687w\"\n        sizes=\"(max-width: 687px) 100vw, 687px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n</div>\n</div>\n<p>The second part is <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></msubsup><mo stretchy=\"false\">(</mo><msub><mi>X</mi><mi>i</mi></msub><mo>−</mo><mover accent=\"true\"><mi>X</mi><mo>ˉ</mo></mover><msup><mo stretchy=\"false\">)</mo><mn>2</mn></msup></mrow><annotation encoding=\"application/x-tex\">\\sum_{i=1}^n (X_i - \\bar{X})^2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.104002em;vertical-align:-0.29971000000000003em;\"></span><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:-0.0000050000000000050004em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.804292em;\"><span style=\"top:-2.40029em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.29971000000000003em;\"><span></span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.07011em;vertical-align:-0.25em;\"></span><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8201099999999999em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span></span><span style=\"top:-3.25233em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.16666em;\"><span class=\"mord\">ˉ</span></span></span></span></span></span></span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span></span>, which is very interesting since it represents the distance of each X to the mean X. Intuitively, it means the X better to be evenly distributed. Below are some examples.</p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\"><span class=\"token operator\">></span> library<span class=\"token punctuation\">(</span><span class=\"token string\">\"ggplot2\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">></span> x <span class=\"token operator\">&lt;-</span> rnorm<span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">,</span> <span class=\"token number\">50</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">></span> A <span class=\"token operator\">&lt;-</span> data.frame<span class=\"token punctuation\">(</span>x<span class=\"token operator\">=</span>x<span class=\"token punctuation\">,</span> y<span class=\"token operator\">=</span>rnorm<span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> x<span class=\"token punctuation\">)</span>\n<span class=\"token operator\">></span> ggplot<span class=\"token punctuation\">(</span>A<span class=\"token punctuation\">,</span> aes<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> \n    geom_point<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> \n    geom_smooth<span class=\"token punctuation\">(</span>method<span class=\"token operator\">=</span><span class=\"token string\">\"lm\"</span><span class=\"token punctuation\">,</span> aes<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> xlim<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span>\n    geom_smooth<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">></span> \n<span class=\"token operator\">></span> x <span class=\"token operator\">&lt;-</span> <span class=\"token number\">1</span><span class=\"token operator\">:</span><span class=\"token number\">100</span>\n<span class=\"token operator\">></span> A <span class=\"token operator\">&lt;-</span> data.frame<span class=\"token punctuation\">(</span>x<span class=\"token operator\">=</span>x<span class=\"token punctuation\">,</span> y<span class=\"token operator\">=</span>rnorm<span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> x<span class=\"token punctuation\">)</span>\n<span class=\"token operator\">></span> ggplot<span class=\"token punctuation\">(</span>A<span class=\"token punctuation\">,</span> aes<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> \n    geom_point<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> \n    geom_smooth<span class=\"token punctuation\">(</span>method<span class=\"token operator\">=</span><span class=\"token string\">\"lm\"</span><span class=\"token punctuation\">,</span> aes<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> xlim<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span>\n    geom_smooth<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">></span> </code></pre></div>\n<p>In below two figures, the slope is the same (1), but in the left figure, X are crowded together, but in the right X are evenly distributed. Intuitively we know the right one more reliable.</p>\n<div>\n<div style=\"display:inline-block; width: 40%; margin: 10px\">\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 687px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/54528d005e046ed8aa1be3d01658f93e/aec65/consolidated_x.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 81.6%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAABSUlEQVQ4y7VUyU7DMBDNX3PhC/gKDgiExCIhLgg4IxWuXChQVDWLE2dr9qjJQ+PIoTFOUw4cnsYzzjzNmxnHqKoKYRgiCAL4vv9nKxB0PsEAgHWyBmMMrusOIGOM6eM6CMI0TYXjed4AMjZmu/Mwx2jbFnEc70WoxnUw2raZJJSwbRuce6NkglBKVvuyTUh3juPAtky8zReip/JezRGESZIofflJoCma5gqPD/c4v7zD0/MrXMYGhIMKsyxDFEXa8qnh3HMxf//EweERTs6uEQb+tGRZ4XZlBOrXx2KJ49NbXFzdgHusX6GdkuXauIpkIvxampjNXmBZK21LfhE2ze4pE2lAMjkfXaP/3UPdS5l6Iapk7VDG9nBfv++hlNwNgYu9Iysx5asxUSENpixLYTebjUCe5/2Z4qSCfnV0lt/Xdd3fF0Uhcr4B6JCxsWzg84gAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"consolidated X\"\n        title=\"consolidated X\"\n        src=\"/static/54528d005e046ed8aa1be3d01658f93e/aec65/consolidated_x.png\"\n        srcset=\"/static/54528d005e046ed8aa1be3d01658f93e/63868/consolidated_x.png 250w,\n/static/54528d005e046ed8aa1be3d01658f93e/0b533/consolidated_x.png 500w,\n/static/54528d005e046ed8aa1be3d01658f93e/aec65/consolidated_x.png 687w\"\n        sizes=\"(max-width: 687px) 100vw, 687px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n</div>\n<div style=\"display:inline-block; width: 40%; margin: 10px\">\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 687px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/be4ece99f52628ef9fba833e2a08dc27/aec65/even_x.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 81.6%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAABwklEQVQ4y5VUaW+CQBDl//+kJk0TW7XVplZrq2IpiriUvUBNPNHXzCKNCPb48DIMu3O8NwMWAMzncyilctBal9qycyklpOCIoggWJYzjGJxzAyHEP6yA4CGkUmi2bIw9H9Z2uzWVqApdMtWOyPyy9xQTxwqDoYurmyd0ujYE57AOh4NpNatahtMz6kpJCd+f4Lb+jGbLgTsaQ4gQUqqU8mw2KyTMOjn3Iy0xHDq4vX/FU2cIxnxorSBEep7T8FKHWZdKcvTtESr1N0z8EHGkctqbhJvNpqBhvkPSTSAIGOrNNzw+vyMMQ0SRTodypq+1Xq9LKWegLga2g0bLQd/28BmwghynuKihUtIEd3su6o82PlwP4ScDY+xHaazdbmeWMy9+CN+fotbooVJrG7pEm4oWJckPzkqSxCRM9ZBGeOdjgutK2wyA/J+mXkiYTZlG73lj3N13UG30MGUBtJbgZ3v4G44axhiNJ6g2+mh3HQTB9EhR/DnRd0KiTB1WH14wsF3MZ9FxVeSfFr1AOfv0GJsa2qc7Rch29NyW3fnWkCZNP4kk2WO/3xt/uVyaZ2JAdrFYmDv0TKD9TWPS89VqZWK+AF2srzh0hUxNAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"even X\"\n        title=\"even X\"\n        src=\"/static/be4ece99f52628ef9fba833e2a08dc27/aec65/even_x.png\"\n        srcset=\"/static/be4ece99f52628ef9fba833e2a08dc27/63868/even_x.png 250w,\n/static/be4ece99f52628ef9fba833e2a08dc27/0b533/even_x.png 500w,\n/static/be4ece99f52628ef9fba833e2a08dc27/aec65/even_x.png 687w\"\n        sizes=\"(max-width: 687px) 100vw, 687px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n</div>\n</div>\n<p>This is the meaning of variance of slope, it's decided by the distribution of X, and variance of error.</p>\n<h2>Multivariable Regression (MR)</h2>\n<p>Finally, in the third week, we started to learn multi-variable regression. This is what exactly what I need to learn. A famous case here is insurance prediction. So insurance company have a huge dataset from a customer, their age, BMI, job, gender, race... And, what they want to predict is only one thing: The number of times the customer go to the hospital next year. In another word, we have multiple X here, but only one y.</p>\n<p>There are at least a couple of challenges here:</p>\n<ol>\n<li>\n<p><strong>Model Search</strong>, how to select the best and most suitable model? There are so many different types of regression models, like fixed-effect. etc.</p>\n</li>\n<li>\n<p><strong>Feather Selection</strong>, what variables (predictors) should we select into the model?</p>\n</li>\n<li>\n<p><strong>Overfitting</strong>, If we put enough variables into MR, we may get 0 residual, but that means some useless variables in the model, and <strong>this will lead us to miss the actually-important variables.</strong> Thus, in MR, it's not the more the better.</p>\n</li>\n<li>\n<p><strong>[I added] Multicollinearity</strong> is a statistical concept where several independent variables in a model are correlated. Two variables are considered to be perfectly collinear if their correlation coefficient is +/- 1.0. Multicollinearity among independent variables will result in less reliable statistical inferences.</p>\n</li>\n</ol>\n<blockquote>\n<p>Here Brian mentioned two things: One if another useful Coursera class is Practical Machine Learning, which contains a lot more detail about model selection, feature selection .etc</p>\n<p>Another important thing is: Brian mentioned that in many Kaggle competitions, MR can already lead you to a pretty good result, though in general models like RandomForest, Boosting can do a bit better, but just really a little bit.</p>\n<p><strong>Thus, it is worth using MR as the starting point for most ML problems.</strong></p>\n</blockquote>\n<p>Below is the starting equation for MR:</p>\n<div class=\"math math-display\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><msub><mi>Y</mi><mi>i</mi></msub><mo>=</mo><msub><mi>β</mi><mn>1</mn></msub><msub><mi>X</mi><mrow><mn>1</mn><mi>i</mi></mrow></msub><mo>+</mo><msub><mi>β</mi><mn>2</mn></msub><msub><mi>X</mi><mrow><mn>2</mn><mi>i</mi></mrow></msub><mo>+</mo><mi mathvariant=\"normal\">.</mi><mi mathvariant=\"normal\">.</mi><mi mathvariant=\"normal\">.</mi><mo>+</mo><msub><mi>β</mi><mi>p</mi></msub><msub><mi>X</mi><mrow><mi>p</mi><mi>i</mi></mrow></msub><mo>+</mo><mi>ϵ</mi><mo>=</mo><munderover><mo>∑</mo><mrow><mi>k</mi><mo>=</mo><mn>1</mn></mrow><mi>p</mi></munderover><msub><mi>X</mi><mrow><mi>i</mi><mi>k</mi></mrow></msub><msub><mi>β</mi><mi>k</mi></msub><mo>+</mo><msub><mi>ϵ</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">Y_i = \\beta_1X_{1i} + \\beta_2X_{2i} + ... + \\beta_pX_{pi} + \\epsilon = \\sum_{k=1}^pX_{ik}\\beta_k + \\epsilon_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">Y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.05278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span><span class=\"mord mathnormal mtight\">i</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.05278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span><span class=\"mord mathnormal mtight\">i</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.66666em;vertical-align:-0.08333em;\"></span><span class=\"mord\">...</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.980548em;vertical-align:-0.286108em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15139200000000003em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.05278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">p</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">p</span><span class=\"mord mathnormal mtight\">i</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">ϵ</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:3.0006180000000002em;vertical-align:-1.302113em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.6985050000000002em;\"><span style=\"top:-1.8478869999999998em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.0500049999999996em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span><span style=\"top:-4.347113em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">p</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.302113em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">ik</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.05278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">ϵ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span></div>\n<p>Note that <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>X</mi><mrow><mn>1</mn><mi>i</mi></mrow></msub></mrow><annotation encoding=\"application/x-tex\">X_{1i}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span><span class=\"mord mathnormal mtight\">i</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span> is normally 1, so <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>β</mi><mn>1</mn></msub></mrow><annotation encoding=\"application/x-tex\">\\beta_1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.05278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span> is intercept. So just like a one variable situation, the principle of this regression, is to minimise the residual:</p>\n<div class=\"math math-display\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><mo stretchy=\"false\">(</mo><msub><mi>Y</mi><mi>i</mi></msub><mo>−</mo><munderover><mo>∑</mo><mrow><mi>k</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><msub><mi>X</mi><mrow><mi>k</mi><mi>i</mi></mrow></msub><msub><mi>β</mi><mi>k</mi></msub><msup><mo stretchy=\"false\">)</mo><mn>2</mn></msup></mrow><annotation encoding=\"application/x-tex\">\\sum_{i=1}^{n}(Y_i-\\sum_{k=1}^{n}X_{ki}\\beta_k)^2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:2.929066em;vertical-align:-1.277669em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.6513970000000002em;\"><span style=\"top:-1.872331em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.050005em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span><span style=\"top:-4.3000050000000005em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.277669em;\"><span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">Y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.9535100000000005em;vertical-align:-1.302113em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.6513970000000002em;\"><span style=\"top:-1.8478869999999998em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.0500049999999996em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span><span style=\"top:-4.300005em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.302113em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">ki</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.05278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641079999999999em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span></span></div>\n<p>How to intuitively understand the above equation? If we have two variables, what the above equation estimating is the distance for each dot in a 3D space, to a flat plate we \"insert\" though them. Blew is an example I found online.</p>\n<div style=\"text-align: center; width: 60%\">\n<p><img src=\"https://www.palass.org/sites/default/files/media/palaeomath_101/article_4/figure_2.jpg\" alt=\"Two variable regression\"></p>\n</div>\n<p>Brian did a beautiful deduction to explain intuitively what <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>β</mi><mi>k</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\beta_k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.05278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span>, is by exampling two variables. <b style=\"background-color: #fcfaa7\">That for one variable <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>X</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">X_{i}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span>, its slope <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>β</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\beta_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.05278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span> is actually the slope(coef) estimated, by other variables' linear effect are removed. In another word, in MR, each variable's coef (slope) is adjusted for other variables (residuals).</b></p>\n<p>Below is the example of R code for MR:</p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\">coef<span class=\"token punctuation\">(</span>lm<span class=\"token punctuation\">(</span>y <span class=\"token operator\">~</span> x <span class=\"token operator\">+</span> x2 <span class=\"token operator\">+</span> x3<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h2>Swiss Fertility Example</h2>\n<p>A perfect step-by-step guild for my regression task. The Github link is <a href=\"https://github.com/bcaffo/courses/blob/master/07_RegressionModels/02_02_multivariateExamples/index.md\">here</a>.</p>\n<p>Here the lecture included an example of the relationship between fertility of provinces and socie-economic indicators from a Switzerland database from 1888. It includes some interesting factors like the percentage of male jobs (agriculture or not), examination score, education level, and Catholic or not.etc. We want to find out if these factors are related to the fertility rate of provinces.</p>\n<h3>Step1: use <code class=\"language-text\">ggpair</code> to draw regression plots for each two variables**</h3>\n<p><img src=\"https://raw.githubusercontent.com/bcaffo/courses/master/07_RegressionModels/02_02_multivariateExamples/fig/unnamed-chunk-1.png\" alt=\"ggpair plot\"></p>\n<p>The above plot clearly shows us the relation between any two variables. <strong>I need to find out how to do the similar thing to categorical variables.</strong></p>\n<h3>Step 2: Through everything into the regression model**</h3>\n<p>The code is simple:</p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\"><span class=\"token operator\">></span> summary<span class=\"token punctuation\">(</span>lm<span class=\"token punctuation\">(</span>Fertility <span class=\"token operator\">~</span> . <span class=\"token punctuation\">,</span> data <span class=\"token operator\">=</span> swiss<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\nCall<span class=\"token operator\">:</span>\nlm<span class=\"token punctuation\">(</span>formula <span class=\"token operator\">=</span> Fertility <span class=\"token operator\">~</span> .<span class=\"token punctuation\">,</span> data <span class=\"token operator\">=</span> swiss<span class=\"token punctuation\">)</span>\n\nResiduals<span class=\"token operator\">:</span>\n     Min       <span class=\"token number\">1</span>Q   Median       <span class=\"token number\">3</span>Q      Max \n<span class=\"token operator\">-</span><span class=\"token number\">15.2743</span>  <span class=\"token operator\">-</span><span class=\"token number\">5.2617</span>   <span class=\"token number\">0.5032</span>   <span class=\"token number\">4.1198</span>  <span class=\"token number\">15.3213</span> \n\nCoefficients<span class=\"token operator\">:</span>\n                 Estimate Std. Error t value Pr<span class=\"token punctuation\">(</span><span class=\"token operator\">></span><span class=\"token operator\">|</span>t<span class=\"token operator\">|</span><span class=\"token punctuation\">)</span>    \n<span class=\"token punctuation\">(</span>Intercept<span class=\"token punctuation\">)</span>      <span class=\"token number\">66.91518</span>   <span class=\"token number\">10.70604</span>   <span class=\"token number\">6.250</span> <span class=\"token number\">1.91e-07</span> <span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span>\nAgriculture      <span class=\"token operator\">-</span><span class=\"token number\">0.17211</span>    <span class=\"token number\">0.07030</span>  <span class=\"token operator\">-</span><span class=\"token number\">2.448</span>  <span class=\"token number\">0.01873</span> <span class=\"token operator\">*</span>  \nExamination      <span class=\"token operator\">-</span><span class=\"token number\">0.25801</span>    <span class=\"token number\">0.25388</span>  <span class=\"token operator\">-</span><span class=\"token number\">1.016</span>  <span class=\"token number\">0.31546</span>    \nEducation        <span class=\"token operator\">-</span><span class=\"token number\">0.87094</span>    <span class=\"token number\">0.18303</span>  <span class=\"token operator\">-</span><span class=\"token number\">4.758</span> <span class=\"token number\">2.43e-05</span> <span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span>\nCatholic          <span class=\"token number\">0.10412</span>    <span class=\"token number\">0.03526</span>   <span class=\"token number\">2.953</span>  <span class=\"token number\">0.00519</span> <span class=\"token operator\">*</span><span class=\"token operator\">*</span> \nInfant.Mortality  <span class=\"token number\">1.07705</span>    <span class=\"token number\">0.38172</span>   <span class=\"token number\">2.822</span>  <span class=\"token number\">0.00734</span> <span class=\"token operator\">*</span><span class=\"token operator\">*</span> \n<span class=\"token operator\">-</span><span class=\"token operator\">-</span><span class=\"token operator\">-</span>\nSignif. codes<span class=\"token operator\">:</span>  <span class=\"token number\">0</span> ‘<span class=\"token operator\">*</span><span class=\"token operator\">*</span><span class=\"token operator\">*</span>’ <span class=\"token number\">0.001</span> ‘<span class=\"token operator\">*</span><span class=\"token operator\">*</span>’ <span class=\"token number\">0.01</span> ‘<span class=\"token operator\">*</span>’ <span class=\"token number\">0.05</span> ‘.’ <span class=\"token number\">0.1</span> ‘ ’ <span class=\"token number\">1</span>\n\nResidual standard error<span class=\"token operator\">:</span> <span class=\"token number\">7.165</span> on <span class=\"token number\">41</span> degrees of freedom\nMultiple R<span class=\"token operator\">-</span>squared<span class=\"token operator\">:</span>  <span class=\"token number\">0.7067</span><span class=\"token punctuation\">,</span>\tAdjusted R<span class=\"token operator\">-</span>squared<span class=\"token operator\">:</span>  <span class=\"token number\">0.671</span> \nF<span class=\"token operator\">-</span>statistic<span class=\"token operator\">:</span> <span class=\"token number\">19.76</span> on <span class=\"token number\">5</span> and <span class=\"token number\">41</span> DF<span class=\"token punctuation\">,</span>  p<span class=\"token operator\">-</span>value<span class=\"token operator\">:</span> <span class=\"token number\">5.594e-10</span></code></pre></div>\n<p>It looks like we get a list of significant factors. Remember that the Estimate (slope, coef) above represent the meaning of units of Y change, while one unit of X change, with all other variable's linear effect removed.</p>\n<p><b style=\" background-color: #fcfaa7\"> Based one Step 1 and 2, one key question is, how we can decide what factors should be put into the model? And why? </b></p>\n<h3>Step 3: Change Models, use smaller number of factors**</h3>\n<p>In below example, it only take Agriculture as X.</p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\"><span class=\"token operator\">></span> summary<span class=\"token punctuation\">(</span>lm<span class=\"token punctuation\">(</span>Fertility <span class=\"token operator\">~</span> Agriculture<span class=\"token punctuation\">,</span> data <span class=\"token operator\">=</span> swiss<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token operator\">$</span>coefficients\n              Estimate Std. Error   t value     Pr<span class=\"token punctuation\">(</span><span class=\"token operator\">></span><span class=\"token operator\">|</span>t<span class=\"token operator\">|</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">(</span>Intercept<span class=\"token punctuation\">)</span> <span class=\"token number\">60.3043752</span> <span class=\"token number\">4.25125562</span> <span class=\"token number\">14.185074</span> <span class=\"token number\">3.216304e-18</span>\nAgriculture  <span class=\"token number\">0.1942017</span> <span class=\"token number\">0.07671176</span>  <span class=\"token number\">2.531577</span> <span class=\"token number\">1.491720e-02</span></code></pre></div>\n<p>And, we found that for Agriculture, the direction changed to positive, which means if we take other effect into consideration, Agriculture have negative effect on fertility, but if we only regression on it only, it's positive! This is called \"Simpson's Paradox\". So, we should think deeper about why it will happen. Below is Brian's example.</p>\n<p>In the below example, X1 is negatively related to y since we know the true formula. We get correct result when we put both X into regression, however, if we just regression X1, it shows positive correlation with Y.</p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\"><span class=\"token operator\">></span> n <span class=\"token operator\">&lt;-</span> <span class=\"token number\">100</span>\n<span class=\"token operator\">></span> x2 <span class=\"token operator\">&lt;-</span> <span class=\"token number\">1</span> <span class=\"token operator\">:</span> n\n<span class=\"token operator\">></span> x1 <span class=\"token operator\">&lt;-</span> <span class=\"token number\">.01</span> <span class=\"token operator\">*</span> x2 <span class=\"token operator\">+</span> runif<span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">,</span> <span class=\"token operator\">-</span><span class=\"token number\">.1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">.1</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">></span> y <span class=\"token operator\">=</span> <span class=\"token operator\">-</span>x1 <span class=\"token operator\">+</span> x2 <span class=\"token operator\">+</span> rnorm<span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">,</span> sd <span class=\"token operator\">=</span> <span class=\"token number\">.01</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">></span> summary<span class=\"token punctuation\">(</span>lm<span class=\"token punctuation\">(</span>y <span class=\"token operator\">~</span> x1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token operator\">$</span>coef\n            Estimate Std. Error t value  Pr<span class=\"token punctuation\">(</span><span class=\"token operator\">></span><span class=\"token operator\">|</span>t<span class=\"token operator\">|</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">(</span>Intercept<span class=\"token punctuation\">)</span>    <span class=\"token number\">1.454</span>      <span class=\"token number\">1.079</span>   <span class=\"token number\">1.348</span> <span class=\"token number\">1.807e-01</span>\nx1            <span class=\"token number\">96.793</span>      <span class=\"token number\">1.862</span>  <span class=\"token number\">51.985</span> <span class=\"token number\">3.707e-73</span>\n<span class=\"token operator\">></span> \n<span class=\"token operator\">></span> summary<span class=\"token punctuation\">(</span>lm<span class=\"token punctuation\">(</span>y <span class=\"token operator\">~</span> x1 <span class=\"token operator\">+</span> x2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token operator\">$</span>coef\n             Estimate Std. Error  t value   Pr<span class=\"token punctuation\">(</span><span class=\"token operator\">></span><span class=\"token operator\">|</span>t<span class=\"token operator\">|</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">(</span>Intercept<span class=\"token punctuation\">)</span>  <span class=\"token number\">0.001933</span>  <span class=\"token number\">0.0017709</span>    <span class=\"token number\">1.092</span>  <span class=\"token number\">2.777e-01</span>\nx1          <span class=\"token operator\">-</span><span class=\"token number\">1.020506</span>  <span class=\"token number\">0.0163560</span>  <span class=\"token operator\">-</span><span class=\"token number\">62.393</span>  <span class=\"token number\">4.211e-80</span>\nx2           <span class=\"token number\">1.000133</span>  <span class=\"token number\">0.0001643</span> <span class=\"token number\">6085.554</span> <span class=\"token number\">1.544e-272</span></code></pre></div>\n<p>The reason is, the slope (coef) of X1 from regression, is the effect X1 to Y, after removing the linear effect of other Xs (in this case, X2). So we know that the effect of X2 to Y is positive with slope of 1 (exactly as the above code show), after removing the effect of X2, the slope of X1 represent its true effect on Y, which is -1. In the first example, we identified positive effect for X1, because X1 is dependent on X2, so in front of Y, X1 also shows the \"positive\" trend.</p>\n<p>Below I draw the 3D and 2D plot to show this, in the plot both X1 (x-axis) and X2 (y-axis) show a positive trend with Y (z-axis). <b style=\"background-color: #fcfaa7\"> This means, we can't use 3D or 2D plots to visually detect slop for MR, because the real slope needs to be adjusted for other variables' linear effects. It's totally wrong to look at figures from raw data to find the correlation effect. </b></p>\n<div>\n<div style=\"display:inline-block; width: 40%; margin: 10px\">\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 761px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/4055da17c1047c8ac5a97553f26f11e5/8c857/3Dplot.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 87.2%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAABu0lEQVQ4y41UW0vDMBTu//8HPvgggq+CVxDnw0RFdBvCBl7ZHE6dbk631rVpkk9OmhOTrhMDZynZydfvcmgkpYQQAlrrpUVr8VzBX3weEWCapkGzUioo6vHP7TsgVYb59wlEemFBFSJ6KJqq2fmAdKE4Exh9t/A83UU8b0Kp2LGM6EKSJJXMfIZmV9JcvBwdovNxDK1zw7YoK/k/DPM8B+tsjG6w0d3DOJ2guJvbXsuQfigUBvWZacsOSmOSJqgPblEbdPCcTKyHcoGMA/z16bekVC7N/btrrDRPXapGfoWiyE+wCmj4NcP6WQPnvT5SkVswFShaYEhjQz5xAy2RS1w9DNB6eMLB1Q200g6sCigA5GC4iVaz84jdehvjz7gIBdqBlUMLAA0bIUzxLO1sN3B41MZ0lphg6D8C5SKbeJRYkZtDBiTP3gYf2Fyro9cd4n34WbCii6X0GZCLLaPlJI9fJ9haraF//+LeWMgJh7wsk4DiOHZWOYaZyPDSGyIhmdBQUi0ddH/PssxUEIr/VWE/qYk9K4PwXvY+AORDMxrWGw6AdvLJ94/llj9v0V/fv9BLHnrpdk7YH5sfrkw0pip6YF8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"3D plot\"\n        title=\"3D plot\"\n        src=\"/static/4055da17c1047c8ac5a97553f26f11e5/8c857/3Dplot.png\"\n        srcset=\"/static/4055da17c1047c8ac5a97553f26f11e5/63868/3Dplot.png 250w,\n/static/4055da17c1047c8ac5a97553f26f11e5/0b533/3Dplot.png 500w,\n/static/4055da17c1047c8ac5a97553f26f11e5/8c857/3Dplot.png 761w\"\n        sizes=\"(max-width: 761px) 100vw, 761px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n</div>\n<div style=\"display:inline-block; width: 42%; margin: 10px\">\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e3f58b9adb7ea1a313489d528b4b8cdf/b12f7/ggpair_plot.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 83.2%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAAByElEQVQ4y5WUWa/qMAyE+/9/Fi9sQohFAgQCsZa1gNgEBXz1GU3U08N5uJFMnNSejD0J0Ww2s/l8btPp1IbDoc+LxcK2262t12u3OI6Dv9vtbLPZuL9arXzW+nq9WqQFIAAzk/R8Pu1/RpqmnhfBEIMFG/gcIMD3++0+c95er5cb436/fwDFiBIxyoBp+kzDyafT6RcY43K5OJAAyQ8lM8tfLpcO9G18Y8p4PB4fhvxkbb/f+wwgwQRyOrNK/AswSRKL+BEYPkr3ej33aQdsZazP5/MvpgKETCj5cDhYrVazSqXiHwSg/kow4gSYHaFkggFoNBpWLpdDcravmAQTION2u/0QhbiIxGq1aq1Wy5MEQMlZQFWC4mIIK4kXrg0ldjodOx6PgQksBKjrhE8Cr+Gvi50kO4viZexgBAMEi9FoFEAlGsx4lvQWYSSijLa5KHxQb/r9vpVKJW9+to8E8g3R2NPLyqo/Ho8/F5sAEtgoFAo2mUwCYwnWbret2WwGtvnXhU8eWBEJg8HAisWil8QaVjBmrtfr1u12w76A8jcApq4yJ1Nm9mqIBepz0QHT39c39X8A8ipIoEw1Ni8AIDDG8rHa1+34B2alCHlf42s0AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"ggpare_plot\"\n        title=\"ggpare_plot\"\n        src=\"/static/e3f58b9adb7ea1a313489d528b4b8cdf/00d43/ggpair_plot.png\"\n        srcset=\"/static/e3f58b9adb7ea1a313489d528b4b8cdf/63868/ggpair_plot.png 250w,\n/static/e3f58b9adb7ea1a313489d528b4b8cdf/0b533/ggpair_plot.png 500w,\n/static/e3f58b9adb7ea1a313489d528b4b8cdf/00d43/ggpair_plot.png 1000w,\n/static/e3f58b9adb7ea1a313489d528b4b8cdf/b12f7/ggpair_plot.png 1020w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n</div>\n</div>\n<p>So, what plot we should draw and look? <strong>Use the Residual Plot.</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\"><span class=\"token operator\">></span> ey <span class=\"token operator\">&lt;-</span> resid<span class=\"token punctuation\">(</span>lm<span class=\"token punctuation\">(</span>y <span class=\"token operator\">~</span> x2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># Remove effect of X2 to Y, so the residual should be of X1 to Y</span>\n<span class=\"token operator\">></span> ex1 <span class=\"token operator\">&lt;-</span> resid<span class=\"token punctuation\">(</span>lm<span class=\"token punctuation\">(</span>x1 <span class=\"token operator\">~</span> x2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># Remove effect of X2 to X1, so residual should be the X1 to X</span></code></pre></div>\n<p><img src=\"https://raw.githubusercontent.com/bcaffo/courses/master/07_RegressionModels/02_02_multivariateExamples/fig/unnamed-chunk-6.png\" alt=\"Residual Plot\"></p>\n<p>Intuitively, the slope of X1 actually means the effect between <strong>X1's residual from X2</strong>, and <strong>Y's Residual from X2</strong>.</p>\n<blockquote>\n<p>Here is a summary, it's pretty suspective to draw causal based on 1v1 regression, because their slope direction may even change if we include other factors.</p>\n</blockquote>\n<p>There is one additional point, if in MR, we include unnecessary (redundent) variables (a combination of other variables), the R will return NA for it.</p>\n<h2>Dummy Variables and Example</h2>\n<p>In the above example, all variables are numeric, so how about categorical variables, like case/control .etc? The idea is to label them as two columns (<span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>X</mi><mrow><mi>c</mi><mi>a</mi><mi>s</mi><mi>e</mi></mrow></msub></mrow><annotation encoding=\"application/x-tex\">X_{case}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">c</span><span class=\"mord mathnormal mtight\">a</span><span class=\"mord mathnormal mtight\">se</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span> nad <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>X</mi><mrow><mi>c</mi><mi>o</mi><mi>n</mi><mi>t</mi><mi>r</mi><mi>o</mi><mi>l</mi></mrow></msub></mrow><annotation encoding=\"application/x-tex\">X_{control}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">co</span><span class=\"mord mathnormal mtight\">n</span><span class=\"mord mathnormal mtight\">t</span><span class=\"mord mathnormal mtight\">ro</span><span class=\"mord mathnormal mtight\" style=\"margin-right:0.01968em;\">l</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span>) with 0, and 1. Then apply the regression to them. On thing I don't know before is that after the regression, the P value (T test) for <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>β</mi><mrow><mi>c</mi><mi>a</mi><mi>s</mi><mi>e</mi></mrow></msub></mrow><annotation encoding=\"application/x-tex\">\\beta_{case}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.05278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">c</span><span class=\"mord mathnormal mtight\">a</span><span class=\"mord mathnormal mtight\">se</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span>, is exactly the same as the T test performed between the two group case/control. That's why sometimes I see people mixing using linear regression and T-test.</p>\n<p>Here Brian is showing another example: InsectSprays, which shows the effect of 5 types of spray. There are only two variables in it, the plot looks like below:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 921px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/34eead4bbf437ed61c150616601f5da1/0f67e/dummy_variable.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 58.80000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAACR0lEQVQoz3WTy2oUQRSG5/1c+AA+g7gXwYXgQly5cSeioETRhShEk3gZTVQ0hBCNMZnMpXu6u+7T0z3TPdf+pHvixIgWHM6pourjr1N/1cbjMcYYXK+HMbaqrdFVbe0iqrV/1NZZomaI9ATDbEg5aqPRCCEEQauJUgqlNcb2kVIu5v8LqdBO0/7UoLvnkeYDKKA2zDKkEDQ31jDWEfhNfn5fxZgeSkm01hWgzGdqpdHO0NluEuz7DEpgqTDLc6IwpL36AhcPaRzU2Xp1ERfnKCmWkN+gM8CeofO5SfDNJ82HTKYFtfFkQtBu4z9dwfUzGgdv+bh2CdfLkTJaQozWWGPOXjk2eOsNot0QawJam2vUksGQ8LhB9/4dbH9I6+grX+vXsG6AlGKpyI8iOmFYgZfAvsF73kBth7Rch5XtJ4seBu0W3ccPsXEfv3PIzsfbWJdUPSxftYR0goDDVrtSKZVGSV0p7Kw3kLs+nurx7F1ELc9zRBTR/lBHG4OIAvb3NjDGIUSEF3oVVEURge9VQGckPVs6QiG6AhEJ+rbPKMwWtvnbIlIpnHEc+03q+3WMtFx8v8mF1+/xwg4P3lge1SV9J1EnfU0H6akPS+CfrymVJLMZN77c5NzL88RCcWtnl6uft0lMwJWVlOtPYxIXIaWuzidJcmKbLDvjswqsFbGJubt7j8tbVwhVSGIdPaWIneVHU3DUFjh76s00PVFYFAWz2YzJZFLlMsrvWObfI01SRuPxcg/FlGI2ZTabM51Oq5jP5xQU/ALaunXmURVfigAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Dummuy Variable\"\n        title=\"Dummuy Variable\"\n        src=\"/static/34eead4bbf437ed61c150616601f5da1/0f67e/dummy_variable.png\"\n        srcset=\"/static/34eead4bbf437ed61c150616601f5da1/63868/dummy_variable.png 250w,\n/static/34eead4bbf437ed61c150616601f5da1/0b533/dummy_variable.png 500w,\n/static/34eead4bbf437ed61c150616601f5da1/0f67e/dummy_variable.png 921w\"\n        sizes=\"(max-width: 921px) 100vw, 921px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h3>Compare each group to a Reference group</h3>\n<p>Then below is the typical regression analysis:</p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\"><span class=\"token operator\">></span> summary<span class=\"token punctuation\">(</span>lm<span class=\"token punctuation\">(</span>count <span class=\"token operator\">~</span> spray<span class=\"token punctuation\">,</span> data<span class=\"token operator\">=</span>InsectSprays<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token operator\">$</span>coef\n               Estimate Std. Error    t value     Pr<span class=\"token punctuation\">(</span><span class=\"token operator\">></span><span class=\"token operator\">|</span>t<span class=\"token operator\">|</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">(</span>Intercept<span class=\"token punctuation\">)</span>  <span class=\"token number\">14.5000000</span>   <span class=\"token number\">1.132156</span> <span class=\"token number\">12.8074279</span> <span class=\"token number\">1.470512e-19</span>\nsprayB        <span class=\"token number\">0.8333333</span>   <span class=\"token number\">1.601110</span>  <span class=\"token number\">0.5204724</span> <span class=\"token number\">6.044761e-01</span>\nsprayC      <span class=\"token operator\">-</span><span class=\"token number\">12.4166667</span>   <span class=\"token number\">1.601110</span> <span class=\"token operator\">-</span><span class=\"token number\">7.7550382</span> <span class=\"token number\">7.266893e-11</span>\nsprayD       <span class=\"token operator\">-</span><span class=\"token number\">9.5833333</span>   <span class=\"token number\">1.601110</span> <span class=\"token operator\">-</span><span class=\"token number\">5.9854322</span> <span class=\"token number\">9.816910e-08</span>\nsprayE      <span class=\"token operator\">-</span><span class=\"token number\">11.0000000</span>   <span class=\"token number\">1.601110</span> <span class=\"token operator\">-</span><span class=\"token number\">6.8702352</span> <span class=\"token number\">2.753922e-09</span>\nsprayF        <span class=\"token number\">2.1666667</span>   <span class=\"token number\">1.601110</span>  <span class=\"token number\">1.3532281</span> <span class=\"token number\">1.805998e-01</span>\n<span class=\"token operator\">></span> </code></pre></div>\n<p>In the above coef (slope) table, every group is compared with group A. The estimate is the changed mean value between A and B, and the t value/p value are equal to the t test if we apply between thesew two groups. In another word, we get a list of T test for each group against A. The Intercept column is exactly A, the P value for group A is comparing group A value to 0.</p>\n<p>At this point, we call A group as \"level\" group, or \"reference\" group, because it is set as a benchmark for other groups to compare. R function <code class=\"language-text\">relevel()</code> can be used to reset another group as a reference if you want to get other T-test results for each group against a certain group.</p>\n<h3>Compare each group to Zero</h3>\n<p>What if we want to include A into the analysis? If you want to show group A result as well, just use the below code:</p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\"><span class=\"token operator\">></span> summary<span class=\"token punctuation\">(</span>lm<span class=\"token punctuation\">(</span>count <span class=\"token operator\">~</span> spray <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> data<span class=\"token operator\">=</span>InsectSprays<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token operator\">$</span>coef\n        Estimate Std. Error   t value     Pr<span class=\"token punctuation\">(</span><span class=\"token operator\">></span><span class=\"token operator\">|</span>t<span class=\"token operator\">|</span><span class=\"token punctuation\">)</span>\nsprayA <span class=\"token number\">14.500000</span>   <span class=\"token number\">1.132156</span> <span class=\"token number\">12.807428</span> <span class=\"token number\">1.470512e-19</span>\nsprayB <span class=\"token number\">15.333333</span>   <span class=\"token number\">1.132156</span> <span class=\"token number\">13.543487</span> <span class=\"token number\">1.001994e-20</span>\nsprayC  <span class=\"token number\">2.083333</span>   <span class=\"token number\">1.132156</span>  <span class=\"token number\">1.840148</span> <span class=\"token number\">7.024334e-02</span>\nsprayD  <span class=\"token number\">4.916667</span>   <span class=\"token number\">1.132156</span>  <span class=\"token number\">4.342749</span> <span class=\"token number\">4.953047e-05</span>\nsprayE  <span class=\"token number\">3.500000</span>   <span class=\"token number\">1.132156</span>  <span class=\"token number\">3.091448</span> <span class=\"token number\">2.916794e-03</span>\nsprayF <span class=\"token number\">16.666667</span>   <span class=\"token number\">1.132156</span> <span class=\"token number\">14.721181</span> <span class=\"token number\">1.573471e-22</span></code></pre></div>\n<p>Now, the estimate is the mean value for each group. <strong>The P value then shows if the mean value of each group is or equal to 0, which is not very useful in most cases. In intuitive this result just tell people if one spray works (compare with 0).</strong></p>\n<blockquote>\n<p>Brian emphasised here multiple times the reference level is important since the coef/p-value means totally different things, wrongly apply of the model and reckless interpretation leads to totally wrong results.</p>\n</blockquote>\n<p>One more thing is, actually Linear Regression assume in a dataset, the variant is constant. However, in Dummy-type regression, the variants are not constant, which is not actually match the requirement of linear regression, the result of it is: The estimate (coef, slop) is correct, but the inferences are <strong>assuredly</strong> not. To draw correct conclusion from categorical-type regresssion, more advanced trick need to be applied.</p>\n<h2>Analysis of Covariance (ANCOVA) Regression</h2>\n<p>What is ANCOVA regression? It's exactly what I need, allowing us to blend analysis of mixed numeric and categorical (factor) variables.</p>\n<h3>Interaction or Not?</h3>\n<p>Here Brian is using the Siss data above, to show an important concept, the interaction between variables. Here he is regression the fertility (y) for two variables, agriculture (x1) and bined Catholic (x2), one numeric and one binary. So interaction is a effect that X1 * X2 in regression model. <strong>In another word, if two variables have interaction, the regression model for two variables, actually has three coef (if intercept not count) to estimate: for X1, for X2, and and for X1 * X2.</strong></p>\n<p>Like before, below is an intuitive understanding of the coefs, by separately fit two lines to the two value (0,1) in factor variable.</p>\n<div>\n<div style=\"display:inline-block; width: 40%; margin: 10px\">\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d0a36a24e117d52d9afee642d118b593/263f4/equation_2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.8%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABrklEQVQoz42Sa4/SUBCG+f8/xA9uNH7eKFkDUhdDoQiUcFkMt3bBlrbQG708Zo5bQlaMTnJ6Tk5nnnln5tQ0TWM0GnE8HnEch/P5TFmWiKVpSp7n/K9JXE3XdbrdLq1Wi+l0qvbVasVsNsM0TZbLJePxGMMwcF1X+c7nc5U8DEMlZjKZYNu2Sl6r6EmSKHWiNI5jTqcT+/2eoigUVECe5zEYDLAsS/n5vq/uO52OSr7b7ahJgKxKspjARGEURUp19f9fJn4KKKAKLGfp3WKxwLaf2Ww2/HR92t0JjhewMr4zrH/GEfVlqcq8jq3J53q9ViMBzcc+d3fvaWo9+vefaNcf0O8/krwMsAIqha9hsmdZRhAEv53ynK3tsrYPeKczxDGZvaeMEwpKipdSq/ibQBmOTH+9XvNs22qaflgQRBlemJGXl6ZBnFz699eSr89B4GMMn9AedSxrR6PxlW+6SRTFbI0hjXcf2Cx+UFZDuQW7nvzh4NI3n/jSbGFttxi9Hg+NNqcwYdrUqL95y2w0wg8C5f8H8Bb0nBWqf0lacgxzAumlPLNUeppenpwo/AUGSkcaBL5iZAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Variables without Interaction\"\n        title=\"Variables without Interaction\"\n        src=\"/static/d0a36a24e117d52d9afee642d118b593/00d43/equation_2.png\"\n        srcset=\"/static/d0a36a24e117d52d9afee642d118b593/63868/equation_2.png 250w,\n/static/d0a36a24e117d52d9afee642d118b593/0b533/equation_2.png 500w,\n/static/d0a36a24e117d52d9afee642d118b593/00d43/equation_2.png 1000w,\n/static/d0a36a24e117d52d9afee642d118b593/aa440/equation_2.png 1500w,\n/static/d0a36a24e117d52d9afee642d118b593/263f4/equation_2.png 1996w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n</div>\n<div style=\"display:inline-block; width: 42%; margin: 10px\">\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7b1780645ef57528293375dc2b4ee574/81386/equation_3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.800000000000004%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABhklEQVQoz4WTWWsCQRCE9///Eh8F9U1FfRJ0UVdFRcUDTzxivO8KX4cJiyakoXdm5+iuqu7xIpGIOp2Oer2eRqORttutjsejDoeD7ve7nk9pud7p4/Mg7HK56Ha72fzJpqR+v69Wq6XT6SRvPB4Lr1Qqtsi82Wyq3W5bklwuJ98vKggqms/nymazSqVSdpZAsVhMtVpNg8HAznv6xUAASjJuNhudz2f7v16vWiwWqtfrWq1W2u12KpVKKhaLSiaTmkwm8h6Ph5xDEVsul4ZwOp0axf8MeYIgsLkFRIvwiDGCxvd9C1woFAwZSfFXEKDnvsfHuQsGTSjt93vTEK3wbrdr9MN3XGEciF8DQgHxZ7OZ6RiuqDvjEIGQJN8d8YLwlTIHERtkdAGUqeZ6vVY+n1e1WtVwODQW7LP+hjA8goI2gjpr/LtESELlmdMVjPifAZ3Y0WjUENAa6XTaerHRaBhy1jKZjMrl8o8sb5TDgXGqG4/HlUgkLBCo6D9eFZSRgNcFSgJ+AVA+QGHxBfhKAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Variables with Interaction\"\n        title=\"Variables with Interaction\"\n        src=\"/static/7b1780645ef57528293375dc2b4ee574/00d43/equation_3.png\"\n        srcset=\"/static/7b1780645ef57528293375dc2b4ee574/63868/equation_3.png 250w,\n/static/7b1780645ef57528293375dc2b4ee574/0b533/equation_3.png 500w,\n/static/7b1780645ef57528293375dc2b4ee574/00d43/equation_3.png 1000w,\n/static/7b1780645ef57528293375dc2b4ee574/aa440/equation_3.png 1500w,\n/static/7b1780645ef57528293375dc2b4ee574/e8950/equation_3.png 2000w,\n/static/7b1780645ef57528293375dc2b4ee574/81386/equation_3.png 2640w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n</div>\n</div>\n<p>The left figure shows the situation that X1 and X2 have no interaction, thus, there is no third efficient B3 for X1X2. In this case, since X2 is categorical variable, we can fit the value to 0 and 1 separately. The result shows us, the two regression line has the same slope, but different intercept. In another word, in this situation, the Catholic factor variable act like a constant, and only modified the intercept.</p>\n<p>The right figure shows that X1 and X2 have an interaction. Thus, our regression line need to include a third slope (B3), in this case, we can see that the intercept is exactly the same as the left figure, but the slope of X1 is changed, because of the interaction effect between X1 and X2.</p>\n<p>An intuitive summary is if we have both numeric and factor variables in one regression, the factor variables coef change the intercept as a constant, and if there are interaction effects between factor variable and numeric variables, there is an additional slope to count for this kind of interaction.</p>\n<p>Below is the R code for above two situation:</p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\"><span class=\"token comment\"># Without Interaction</span>\n<span class=\"token operator\">></span> fit <span class=\"token operator\">&lt;-</span> lm<span class=\"token punctuation\">(</span>Fertility <span class=\"token operator\">~</span> Agriculture <span class=\"token operator\">+</span> factor<span class=\"token punctuation\">(</span>CatholicBin<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> data <span class=\"token operator\">=</span> swiss<span class=\"token punctuation\">)</span>\n<span class=\"token operator\">></span> summary<span class=\"token punctuation\">(</span>fit<span class=\"token punctuation\">)</span><span class=\"token operator\">$</span>coef\n                       Estimate Std. Error   t value     Pr<span class=\"token punctuation\">(</span><span class=\"token operator\">></span><span class=\"token operator\">|</span>t<span class=\"token operator\">|</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">(</span>Intercept<span class=\"token punctuation\">)</span>          <span class=\"token number\">60.8322366</span>  <span class=\"token number\">4.1058630</span> <span class=\"token number\">14.815944</span> <span class=\"token number\">1.032493e-18</span>\nAgriculture           <span class=\"token number\">0.1241776</span>  <span class=\"token number\">0.0810977</span>  <span class=\"token number\">1.531210</span> <span class=\"token number\">1.328763e-01</span>\nfactor<span class=\"token punctuation\">(</span>CatholicBin<span class=\"token punctuation\">)</span><span class=\"token number\">1</span>  <span class=\"token number\">7.8843292</span>  <span class=\"token number\">3.7483622</span>  <span class=\"token number\">2.103406</span> <span class=\"token number\">4.118221e-02</span></code></pre></div>\n<p>To visualise the result, below is the plot for each CatholicBin, we can see that the only difference is on intercept. More precisely, the difference in intercept is B2.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 833px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/65ef9d4604aeafa1e5dafc8f7edc0b22/5205c/without_interaction.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB8klEQVQoz21S246iQBT0/79k92l29sW96IiuIhBBnSgIIiDQNBeX0WyMd2tz2lHHZEiK7nPpyumqruz3exRFgTzPBbIsE+uiKBAyhiCKUC4WIlfkOaaBD55yUbd9DzxNsdvtQN/pdEKFgjiOEYYhoihCGEWXNQzhWhNMfQ+zwEdA9TjG2HHEPkkS0Zswhs1mcydcr9eimKYpeJLAcxwxZcwYXNfFZDKB7boYWSY0w8AvuYORacI0TWiahkarheVyeSekKwdBgPF4jNfhEENdFySqquH70xNatRpUVYWh62g3GpDqdfyuVtHpdCB1ZdSaTaxWqzthWZbo9XrQul2oioJvX77iT7sNwzCgyTIUVUFTktCSJPx8fka7/oKX6g90ul3ImgrHtvFWlsgSjvJviQqJTaMrsgy918NA1/HaH2DQ78O0LMzDUMhgDYYYKgr8qQt7NBaGkUkk1dtqhX/rNXA+301hSYKZ48C1LIR+IMQmB4X4vg93YiNJOaI4AmNM4Grgdrt9dJmKREqgBjKEHGVxLCac+j4455fae99HPLhMwZXoSuJ4HpyZK6acz+eYet6lJ34kjN4nfCCkcUmj29PhHCnnYiVkWYo8y27xZ3i4Mv3o6RyPxxtIhsPhIPL0xoq8EIeudcpfz1AfcZzPZ0H4Hz6jJaiAn3UuAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Without Interaction\"\n        title=\"Without Interaction\"\n        src=\"/static/65ef9d4604aeafa1e5dafc8f7edc0b22/5205c/without_interaction.png\"\n        srcset=\"/static/65ef9d4604aeafa1e5dafc8f7edc0b22/63868/without_interaction.png 250w,\n/static/65ef9d4604aeafa1e5dafc8f7edc0b22/0b533/without_interaction.png 500w,\n/static/65ef9d4604aeafa1e5dafc8f7edc0b22/5205c/without_interaction.png 833w\"\n        sizes=\"(max-width: 833px) 100vw, 833px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Below is the example for <strong>interactive effect</strong> situation. <strong>The different is the sign, from <code class=\"language-text\">+</code> to <code class=\"language-text\">*</code>, which include the interaction between factors.</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\"><span class=\"token comment\"># With Interaction</span>\n<span class=\"token operator\">></span> fit <span class=\"token operator\">&lt;-</span> lm<span class=\"token punctuation\">(</span>Fertility <span class=\"token operator\">~</span> Agriculture <span class=\"token operator\">*</span> factor<span class=\"token punctuation\">(</span>CatholicBin<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> data <span class=\"token operator\">=</span> swiss<span class=\"token punctuation\">)</span>\n<span class=\"token operator\">></span> summary<span class=\"token punctuation\">(</span>fit<span class=\"token punctuation\">)</span><span class=\"token operator\">$</span>coef\n                                    Estimate  Std. Error    t value     Pr<span class=\"token punctuation\">(</span><span class=\"token operator\">></span><span class=\"token operator\">|</span>t<span class=\"token operator\">|</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">(</span>Intercept<span class=\"token punctuation\">)</span>                      <span class=\"token number\">62.04993019</span>  <span class=\"token number\">4.78915566</span> <span class=\"token number\">12.9563402</span> <span class=\"token number\">1.919379e-16</span>\nAgriculture                       <span class=\"token number\">0.09611572</span>  <span class=\"token number\">0.09881204</span>  <span class=\"token number\">0.9727127</span> <span class=\"token number\">3.361364e-01</span>\nfactor<span class=\"token punctuation\">(</span>CatholicBin<span class=\"token punctuation\">)</span><span class=\"token number\">1</span>              <span class=\"token number\">2.85770359</span> <span class=\"token number\">10.62644275</span>  <span class=\"token number\">0.2689238</span> <span class=\"token number\">7.892745e-01</span>\nAgriculture<span class=\"token operator\">:</span>factor<span class=\"token punctuation\">(</span>CatholicBin<span class=\"token punctuation\">)</span><span class=\"token number\">1</span>  <span class=\"token number\">0.08913512</span>  <span class=\"token number\">0.17610660</span>  <span class=\"token number\">0.5061430</span> <span class=\"token number\">6.153416e-01</span>\n<span class=\"token operator\">></span> </code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 833px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2bf6663a369012e3172af8ae6d292170/5205c/with_interaction.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB9klEQVQoz1VTDXOaQBT0//+WZFrNdKYxMVorolEIao2U8CFw4B22iWOMCgLbuRNIZebNc988dny7Sy1JEjDGsFqtQCmtOqMUru/Dcl38iSKB6WqFhWmCBAEixrCwLFDGEMcx8jxHlmWocRAEAXzfF+V5XvXb1HWYtg1z6WDpeWJvbhgwHQdhGGLpuniez7HdbsEfQbjf78+EhAgyTiL+MaUwDAP6YoHfloXJbIahoqAp9fA4GmE8GmEwHKIr9y8JT6cTIn6SODvE83QKXdcxm83w7eYGneYdBrKMJ1XFj2YTrWYTjz0JiqqiOxhAHo+x2+0EYZqmqG02G8iyjC/X12jU66hfXaHT6aDVaqF1ewup30fn4QHddht3X+v4eX+P740G2r0eRqqKyWSCiDKwFcXf11fUuAGSJEHTNEw0DU+KAk1RxKlBGIqyXl6gT6f4pShwTBOWYSCkFOviss12i/ePDyDPi5MZA4sieLYjNCSui4AQEELO+rqumHMjyhnvpYmHw+FTwwuXCxKP+HALV3k3bFuYxHdIsfN/XRByQIqYiBd8AstxYFhWRWg6tphXOwVRiXlSKsIkTrA0TRForocINWNnGXgVIS/n5U6JeT8ej5+EPOFplglQFtf13FO8vW2wjtaI46T6Gng80lOKLDvjPMur+geNfyWpRy/qpAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"With Interaction\"\n        title=\"With Interaction\"\n        src=\"/static/2bf6663a369012e3172af8ae6d292170/5205c/with_interaction.png\"\n        srcset=\"/static/2bf6663a369012e3172af8ae6d292170/63868/with_interaction.png 250w,\n/static/2bf6663a369012e3172af8ae6d292170/0b533/with_interaction.png 500w,\n/static/2bf6663a369012e3172af8ae6d292170/5205c/with_interaction.png 833w\"\n        sizes=\"(max-width: 833px) 100vw, 833px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>The above figure shows, that if two variables have interaction with each other, the difference between two lines with CatholicBin 0 or 1, lies on both intercept and slope.</p>\n<h2>Adjustment (Relation between a Factor and a Continues variable)</h2>\n<p>According to the course instruction: \"Adjustment, is the idea of putting regressors into a linear model to investigate the role of a third variable on the relationship between another two. Since it is often the case that a third variable can distort, or confound if you will, the relationship between two others.\"\\</p>\n<p><strong>However, in <a href=\"https://github.com/bcaffo/courses/blob/master/07_RegressionModels/02_03_adjustment/index.md\">Brian's lecture and GitHub Markdown</a>, looks like it is actually focused on assessing the effect of a factor variable on a continues variable. This is particularly useful in Bioinformatic analysis, like comparing case/control, cancer/normal .etc (<span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>T</mi></mrow><annotation encoding=\"application/x-tex\">T</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span></span></span></span></span> in below figures)</strong></p>\n<p>Below are some possible effect regressions. Basically we focus on a coupe of metrics like:</p>\n<ul>\n<li><strong>Marginal Effect</strong>: the difference between mean between two groups.</li>\n<li><strong>Intercept Difference:</strong> the difference between two intercept lines.</li>\n</ul>\n<p>Let's assume X is age, T is the drug or not (0,1), and Y is the effect of drug. I wil try to use this example to explain each each figure:</p>\n<div style=\"font-size: 0.7em\">\n<div style=\"display:inline-block; vertical-align:top; width: 40%; margin: 10px\">\n<p><img src=\"https://raw.githubusercontent.com/bcaffo/courses/master/07_RegressionModels/02_03_adjustment/fig/unnamed-chunk-1.png\" alt=\"Simulation 1\"></p>\n<p><span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>β</mi><mn>1</mn></msub></mrow><annotation encoding=\"application/x-tex\">\\beta_1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.05278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span> is the marginal effect between groups, while <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>β</mi><mn>2</mn></msub></mrow><annotation encoding=\"application/x-tex\">\\beta_2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.05278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span> is the slop. And importantly, the intercept of the two lines is the same as the marginal effect, which indicates there is no effect between X and T, so we can assume there is no interaction effect between them in the below equation:</p>\n<div class=\"math math-display\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>Y</mi><mo>=</mo><msub><mi>β</mi><mn>0</mn></msub><mo>+</mo><msub><mi>β</mi><mn>1</mn></msub><mi>T</mi><mo>+</mo><msub><mi>β</mi><mn>2</mn></msub><mi>X</mi><mo>+</mo><mi>ϵ</mi></mrow><annotation encoding=\"application/x-tex\">Y = \\beta_0 + \\beta_1T + \\beta_2X + \\epsilon</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">Y</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.05278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.05278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.05278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">ϵ</span></span></span></span></span></div>\n<ul>\n<li>The X variable is unrelated to group status</li>\n<li>The X variable is related to Y, but the intercept depends on group status.</li>\n<li>The group variable is related to Y.\n<ul>\n<li>The relationship between group status and Y is constant depending on X.</li>\n<li>The relationship between group and Y disregarding X is about the same as holding X constant</li>\n</ul>\n</li>\n</ul>\n<p>In my example, it means the drug has a constant improvement effect despite of age. This is possible the best/perfect solution we want to see in reality.</p>\n</div>\n<div style=\"display:inline-block; vertical-align:top; width: 40%; margin: 10px\">\n<p><img src=\"https://raw.githubusercontent.com/bcaffo/courses/master/07_RegressionModels/02_03_adjustment/fig/unnamed-chunk-2.png\" alt=\"Simulation 2\"></p>\n<p>The large marginal effect, but small intercept effect. This example shows the importance to check the figure and not rely on metrics.</p>\n<ul>\n<li>The X variable is highly related to group status. [Note, this is data feature, not regression conclusion.]</li>\n<li>The X variable is related to Y, the intercept doesn't depend on the group variable.\n<ul>\n<li>The X variable remains related to Y holding group status constant</li>\n</ul>\n</li>\n<li>The group variable is marginally related to Y disregarding X.</li>\n<li>The model would estimate no adjusted effect due to group.\n<ul>\n<li>There isn't any data to inform the relationship between group and Y.</li>\n<li>This conclusion is entirely based on the model.</li>\n</ul>\n</li>\n</ul>\n<p>Brian did not see what model is most suitable here. However, it shows that there is no way to do \"adjusted\" on T or X, as they are related.</p>\n<p>In my example, it means the drug are totally applied to two groups of age people, thus we can't assess if drugs have effect on final outcome. It could be totally be the reason of age X.</p>\n</div>\n</div>\n<div style=\"font-size: 0.7em\">\n<div style=\"display:inline-block; vertical-align:top; width: 40%; margin: 10px\">\n<p><img src=\"https://raw.githubusercontent.com/bcaffo/courses/master/07_RegressionModels/02_03_adjustment/fig/unnamed-chunk-3.png\" alt=\"Simulation 3\"></p>\n<p>The marginal effect red is higher than blue, but the intercept red is lower than blue, this is Simpton's Paradox, which means, add/minus variable here will change the direction.</p>\n<ul>\n<li>Group status related to X.</li>\n<li>There is some direct evidence for comparing red and blue holding X fixed.</li>\n</ul>\n<p>Note that this example is the same as the second one, which lack of X that have two groups together, thus we don't know if X have effect with T.</p>\n<p>In my example, it means that if we only compare mean between two groups, red group is better (higher), however this is wrong because blue group testers are younger, thus if we apply the model, we could know that actually, the drug effect is blue group is higher. This example shows the effect of unbalanced X to final outcome Y.</p>\n</div>\n<div style=\"display:inline-block; vertical-align:top; width: 40%; margin: 10px\">\n<p><img src=\"https://raw.githubusercontent.com/bcaffo/courses/master/07_RegressionModels/02_03_adjustment/fig/unnamed-chunk-4.png\" alt=\"Simulation 4\"></p>\n<p>No marginal effect, but a huge intercept effect, showing an \"adjustment effect\" (in other words, adding X or not will change the conclusion).</p>\n<ul>\n<li>Strong adjusted relationship.</li>\n<li>Group status not related to X. [Parallel line we can see]</li>\n<li>There is lots of direct evidence for comparing red and blue holding X fixed. [How we visualise check relation between T and X].</li>\n</ul>\n<p>In my example, it means that the two drugs initially looks like have no different between two groups, however, that's because their X are not balanced as well, if we consider the X (age), and use regression to adjust X into balance one (intercept), the drug shows the effect we are expecting!</p>\n</div>\n</div>\n<div style=\"font-size: 0.7em\">\n<div style=\"display:inline-block; vertical-align:top; width: 40%; margin: 10px\">\n<p><img src=\"https://raw.githubusercontent.com/bcaffo/courses/master/07_RegressionModels/02_03_adjustment/fig/unnamed-chunk-5.png\" alt=\"Simulation 5\"></p>\n<p>This is special, initially, we see the two groups have the same marginal effect, and balanced X distribution. However, remember that the first figure have the same two feature right? So the reverse trend shows that there is an interaction between these two T and X.</p>\n<ul>\n<li>There is no such thing as a group effect [effect of group] here.\n<ul>\n<li>The impact of group reverses itself depending on X.</li>\n<li>Both intercept and slope depends on group.</li>\n</ul>\n</li>\n<li>Group status and X unrelated.\n<ul>\n<li>There's lots of information about group effects holding X fixed.</li>\n</ul>\n</li>\n</ul>\n<p>In my example, it means the drug have effect with X, the young people would show reverse effect as old people. And the Y (outcome of both age and drug) is decided by 1):age, and 2): the drug's relation with X, not constant this time.</p>\n<p>Thus, for this situation, the regression model is:</p>\n<div class=\"math math-display\"><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>Y</mi><mo>=</mo><msub><mi>β</mi><mn>0</mn></msub><mo>+</mo><msub><mi>β</mi><mn>1</mn></msub><mi>T</mi><mo>+</mo><msub><mi>β</mi><mn>2</mn></msub><mi>X</mi><mo>+</mo><msub><mi>β</mi><mn>3</mn></msub><mi>T</mi><mi>X</mi><mo>+</mo><mi>ϵ</mi></mrow><annotation encoding=\"application/x-tex\">Y = \\beta_0 + \\beta_1T + \\beta_2X + \\beta_3TX + \\epsilon</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">Y</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.05278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">0</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.05278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.05278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.05278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">3</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">TX</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">+</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">ϵ</span></span></span></span></span></div>\n<p>And, importantly, the <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>β</mi><mn>1</mn></msub></mrow><annotation encoding=\"application/x-tex\">\\beta_1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.05278em;\">β</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.05278em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span> should not be interpreted here, even if it will sill be calculated by R. <strong>This is not only an adjustment, this is a modification</strong>.</p>\n</div>\n</div>\n<blockquote>\n<p>In summary, what we should look to assess the performance of a continuous variable and a factor variable?</p>\n<ol>\n<li>Compare mean group difference (project all dots to Y axis).</li>\n<li>Check if the two groups have an unbalanced X. If X are unbalanced, we need to reply on model (extended regression line) to make final decision,</li>\n<li>Compare intercept difference with marginal effect, if they are the same and two lines looks parallel, we can assume there is no adjustment effect between T and X, they are independent and unrelated. If not, there are certain level of interaction between T and X.</li>\n<li>Remember the Intercept difference normally is the final conclusion for T, however, this can be wrong in figure 5.</li>\n</ol>\n</blockquote>\n<h2>Model Selection</h2>\n<p>This part is to address one important question: “How do we choose what variables to include in a regression model?”. Firstly Brian introduced the how to include or exclude a variable.</p>\n<p><strong>1. What if I omit an important variable?</strong>\nNot good. If you regression cancer outcome without age, that's not good. How to define an important variable? Check the correlation between age and cancer. Also, if a variable you omit does not have a correlation with Y, that's maybe fine you ignored it.</p>\n<p><strong>2. What if I include variables not important?</strong>\nIf the variables you included does not related with Y, they will not influence the coef and P value, but will inflate the SD, thus the R^2 will looks better if you included a lot of unrelated variables.</p>\n<p><strong>3. What if I included variables correlated with my top-interested variable X?</strong>\nThe standard deviation of the slope of X will increase (in another word, less accurate), that's why we should not include highly-correlated variable into the model.</p>\n<p>Here there is an important metric called <a href=\"https://www.statology.org/multicollinearity-in-r/\">Variance Inflation Factor(VIF)</a>. Te way to estimate is using <code class=\"language-text\">vif()</code> function:</p>\n<div class=\"gatsby-highlight\" data-language=\"r\"><pre class=\"language-r\"><code class=\"language-r\">fit <span class=\"token operator\">&lt;-</span> lm<span class=\"token punctuation\">(</span>Fertility <span class=\"token operator\">~</span> . <span class=\"token punctuation\">,</span> data<span class=\"token operator\">=</span>swiss<span class=\"token punctuation\">)</span>\nvif<span class=\"token punctuation\">(</span>fit<span class=\"token punctuation\">)</span></code></pre></div>","frontmatter":{"date":"December 31, 2022","slug":"/notes/Coursera---Regression-Models","title":"Coursera - Regression Models","tags":["Coursera","Regression","R"],"abstract":"Regression is am important tool that I should have dug into years ago. Here are just some key notes I write done during my learning with the Coursera course Regression Model."}}},"pageContext":{"slug":"/notes/Coursera---Regression-Models"}},
    "staticQueryHashes": ["63159454"]}