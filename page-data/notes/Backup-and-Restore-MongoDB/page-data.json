{
    "componentChunkName": "component---src-templates-note-template-js",
    "path": "/notes/Backup-and-Restore-MongoDB",
    "result": {"data":{"markdownRemark":{"html":"<p>My GCGR platform is using MongoDB, so here since I have a new computer, so I need to find a way to Backup and Restore my MongoDB.</p>\n<h2>1. Backup MongoBD database</h2>\n<p>After searching online, I find below solution works:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token punctuation\">[</span>yuanti01@gcgr ~<span class=\"token punctuation\">]</span>$ <span class=\"token function\">mkdir</span> DBbackup\n<span class=\"token punctuation\">[</span>yuanti01@gcgr ~<span class=\"token punctuation\">]</span>$ mongodump --db<span class=\"token operator\">=</span>GCGRdb --out<span class=\"token operator\">=</span>DBbackup/mongodump-2013-10-24\n<span class=\"token number\">2020</span>-02-04T21:00:32.145+0000\twriting GCGRdb.celllines to\n<span class=\"token number\">2020</span>-02-04T21:00:32.145+0000\twriting GCGRdb.users to\n<span class=\"token number\">2020</span>-02-04T21:00:32.145+0000\twriting GCGRdb.clinfos to\n<span class=\"token number\">2020</span>-02-04T21:00:32.354+0000\t<span class=\"token keyword\">done</span> dumping GCGRdb.clinfos <span class=\"token punctuation\">(</span><span class=\"token number\">1</span> document<span class=\"token punctuation\">)</span>\n<span class=\"token number\">2020</span>-02-04T21:00:32.625+0000\t<span class=\"token keyword\">done</span> dumping GCGRdb.celllines <span class=\"token punctuation\">(</span><span class=\"token number\">1802</span> documents<span class=\"token punctuation\">)</span>\n<span class=\"token number\">2020</span>-02-04T21:00:32.646+0000\t<span class=\"token keyword\">done</span> dumping GCGRdb.users <span class=\"token punctuation\">(</span><span class=\"token number\">55</span> documents<span class=\"token punctuation\">)</span></code></pre></div>\n<p>In the command <code class=\"language-text\">—db</code> indicates the database I want to backup, and <code class=\"language-text\">—out</code> indicates the directory I want to place the file. So here I think it's done.</p>\n<h2>2. Restore MongoBD database</h2>\n<p>Then after fetch data from the online server to my current computer, I need to restore it.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">mongorestore mongodump-2013-10-24</code></pre></div>\n<p>Then everything is restored on my computer that I can continue to develop it. Of course there should have many more parameter I did not clear, but currently, these two lines of code is enough for me to use.</p>\n<h2>3. Linux MongoBD commands</h2>\n<p>If I am using Linux, I can type <code class=\"language-text\">mongo</code> to enter control command action. Then below command could list all database.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">db.adminCommand<span class=\"token punctuation\">(</span> <span class=\"token punctuation\">{</span> listDatabases: <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span> <span class=\"token punctuation\">)</span></code></pre></div>\n<p>Then use one of the two ways to delete database. For mongo command line:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">use GCGRdb<span class=\"token punctuation\">;</span> \ndb.dropDatabase<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Or directly from bash:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">mongo GCGRdb --eval <span class=\"token string\">\"db.dropDatabase()\"</span></code></pre></div>\n<p>After dropping, I can use above restore command to update MongoDB.</p>","frontmatter":{"date":"June 28, 2020","slug":"/notes/Backup-and-Restore-MongoDB","title":"Backup and Restore MongoDB","tags":["MongoDB"],"abstract":"Since I am developing GCGR website, constantly I will need to modify the databse. So I may need to transfer the data from online to offline constantly.  Here I want to record a bit the commands I use to dump data and recover them."}}},"pageContext":{"slug":"/notes/Backup-and-Restore-MongoDB"}},
    "staticQueryHashes": ["63159454"]}