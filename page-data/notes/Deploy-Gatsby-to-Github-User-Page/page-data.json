{"componentChunkName":"component---src-templates-note-template-js","path":"/notes/Deploy-Gatsby-to-Github-User-Page","result":{"data":{"markdownRemark":{"html":"<p>After development, I want to deploy it on my github domain, in my case, it's <a href=\"https://yuantian1991.github.io/\">https://yuantian1991.github.io/</a>. However, it's kind of special to for user github page. Based on my previous trying, such domain page would directly take html files from the master, so you can't just push your code here.</p>\n<p>According the <a href=\"https://www.gatsbyjs.org/docs/how-gatsby-works-with-github-pages/\">Gatsby Docs</a>. There are two ways to do it.</p>\n<ol>\n<li>Push the code to another branch, but generate builded file into master branch.</li>\n<li>Put the code into another repo, then everytime you need to copy-paste builded static files into user page repo.</li>\n</ol>\n<p> I want to try the first one here, hopefully it works.</p>\n<hr>\n<p>Firstly I installed a npm library:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> gh-pages --save-dev</code></pre></div>\n<p>it would be used to directly push builded static file to master.</p>\n<p>Then I created a repo with my name: <code class=\"language-text\">YuanTian1991.github.io</code>. Then <code class=\"language-text\">git init</code>, <code class=\"language-text\">git add .</code>, <code class=\"language-text\">git commit -m &quot;Initial Commit&quot;</code> current project. Then push everything to master branch.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> remote <span class=\"token function\">add</span> origin https://github.com/YuanTian1991/YuanTian1991.github.io.git\n<span class=\"token function\">git</span> push origin master</code></pre></div>\n<p>According to Gatsby's suggestion, I created a new branch <code class=\"language-text\">source</code>, then put all my Gatsby files into it. Then modified this file a bit (I am writing during the process), then committed and pushed to source branch.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> checkout -b <span class=\"token builtin class-name\">source</span> master\n<span class=\"token function\">git</span> <span class=\"token function\">add</span> <span class=\"token builtin class-name\">.</span>\n<span class=\"token function\">git</span> commit -m <span class=\"token string\">\"Modified markdown file a bit.\"</span>\n<span class=\"token function\">git</span> push origin <span class=\"token builtin class-name\">source</span></code></pre></div>\n<p>Then changed default branch to <code class=\"language-text\">source</code>.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b3127342d20765113ac234b424272ec0/85053/fig1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 20.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsSAAALEgHS3X78AAAAlElEQVQY042P6w7DIAiFff83bdeqWwGtWs+ALP3XZCRfuITLIZR6gljwIXZvSKlgKSDlOA5sywrReusDZ+toT/SOQMwoumDOieu63Of8xrbvICK4ac35w4INpZQxxvjNTs/X9YUYkxL9gIiA9Tj5J3zHfMekwgpC1oGUM7rKtWUmxPJtj1h0KeurpVZXPww9/IT1fAFyDDgPoTjpmQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Github change Default Branch\"\n        title=\"Github change Default Branch\"\n        src=\"/static/b3127342d20765113ac234b424272ec0/5a190/fig1.png\"\n        srcset=\"/static/b3127342d20765113ac234b424272ec0/772e8/fig1.png 200w,\n/static/b3127342d20765113ac234b424272ec0/e17e5/fig1.png 400w,\n/static/b3127342d20765113ac234b424272ec0/5a190/fig1.png 800w,\n/static/b3127342d20765113ac234b424272ec0/c1b63/fig1.png 1200w,\n/static/b3127342d20765113ac234b424272ec0/85053/fig1.png 1225w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Then modified <em>package.json</em> file, added <code class=\"language-text\">deploy</code> in it. It should tell the project, to build the static pages, then publish them to master branch.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"deploy\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"gatsby build &amp;&amp; gh-pages -d public -b master\"</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>","frontmatter":{"date":"June 28, 2020","slug":"/notes/Deploy-Gatsby-to-Github-User-Page","title":"Deploy Gatsby to Github User Page"}}},"pageContext":{"slug":"/notes/Deploy-Gatsby-to-Github-User-Page"}}}