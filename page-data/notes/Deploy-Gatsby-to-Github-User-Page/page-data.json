{
    "componentChunkName": "component---src-templates-note-template-js",
    "path": "/notes/Deploy-Gatsby-to-Github-User-Page",
    "result": {"data":{"markdownRemark":{"html":"<p>After development, I want to deploy it on my github domain, in my case, it's <a href=\"https://yuantian1991.github.io/\">https://yuantian1991.github.io/</a>. However, it's kind of special to for user github page. Based on my previous trying, such domain page would directly take html files from the master, so you can't just push your code here.</p>\n<p>According the <a href=\"https://www.gatsbyjs.org/docs/how-gatsby-works-with-github-pages/\">Gatsby Docs</a>. There are two ways to do it.</p>\n<ol>\n<li>Push the code to another branch, but generate builded file into master branch.</li>\n<li>Put the code into another repo, then everytime you need to copy-paste builded static files into user page repo.</li>\n</ol>\n<p>I want to try the first one here, hopefully it works.</p>\n<p>Firstly I installed a npm library:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> gh-pages --save-dev</code></pre></div>\n<p>it would be used to directly push builded static file to master.</p>\n<p>Then I created a repo with my name: <code class=\"language-text\">YuanTian1991.github.io</code>. Then <code class=\"language-text\">git init</code>, <code class=\"language-text\">git add .</code>, <code class=\"language-text\">git commit -m \"Initial Commit\"</code> current project. Then push everything to master branch.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> remote <span class=\"token function\">add</span> origin https://github.com/YuanTian1991/YuanTian1991.github.io.git\n<span class=\"token function\">git</span> push origin master</code></pre></div>\n<p>According to Gatsby's suggestion, I created a new branch <code class=\"language-text\">source</code>, then put all my Gatsby files into it. Then modified this file a bit (I am writing during the process), then committed and pushed to source branch.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">git</span> checkout <span class=\"token parameter variable\">-b</span> <span class=\"token builtin class-name\">source</span> master\n<span class=\"token function\">git</span> <span class=\"token function\">add</span> <span class=\"token builtin class-name\">.</span>\n<span class=\"token function\">git</span> commit <span class=\"token parameter variable\">-m</span> <span class=\"token string\">\"Modified markdown file a bit.\"</span>\n<span class=\"token function\">git</span> push origin <span class=\"token builtin class-name\">source</span></code></pre></div>\n<p>Then changed default branch to <code class=\"language-text\">source</code>.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b3127342d20765113ac234b424272ec0/85053/fig1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 20.4%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAj0lEQVQY042P2w4DIQhE/f8/dS/KrqKuCtNIn/rQtJOcQAiBGVfbg8wFd8pWF1waSm3v+Z1weI9SKvqYePr4Su8DLjOjtQZVhYgYkQjnGcDMMKkAqvhHLqUMIsIUsYGIIoSIbdsRYjSu6zaHbAnYHi0++pxRa4WjEEB0YYxpLhfryHEG+G235bU45/zJSvcCaUM4BLvwnkkAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Github change Default Branch\"\n        title=\"Github change Default Branch\"\n        src=\"/static/b3127342d20765113ac234b424272ec0/00d43/fig1.png\"\n        srcset=\"/static/b3127342d20765113ac234b424272ec0/63868/fig1.png 250w,\n/static/b3127342d20765113ac234b424272ec0/0b533/fig1.png 500w,\n/static/b3127342d20765113ac234b424272ec0/00d43/fig1.png 1000w,\n/static/b3127342d20765113ac234b424272ec0/85053/fig1.png 1225w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Then modified <em>package.json</em> file, added <code class=\"language-text\">deploy</code> in it. It should tell the project, to build the static pages, then publish them to master branch.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"deploy\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"gatsby build &amp;&amp; gh-pages -d public -b master\"</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Then in theory, if I type <code class=\"language-text\">npm run deploy</code>, it should work, then I tried... it's not working, why? It shows a Gatsby default README file. After searching intensively online, someome mentioned that if randomly select a theme for Github page, it would work. I tried, like below page, and...incredably it works.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/606b1ff85d16998b0b59c3bb151c7997/00d43/fig2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 40.400000000000006%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsTAAALEwEAmpwYAAABGUlEQVQoz5WSbU/CMBRG+f8/To36RSFqxgIbo1vf936PWUFCRD7Y5qS3TXpy87QrEaFWirIoOBwq/jXkltUiPNqWUkcqpXDe44PHe4dzFuct3nu0MVjnEksd2xZBmGW+sLiSMJsrXuMXL2bNs37jyX7xaLc8mCzxPuRsxm1ivTBkbKacT9ld+JAdUTpWS+elr8jNDjVojn1D1ZvE4YwaDfVkUZNHi8cSMCy1S/sTjkHGkzC4gDrWmMagG0OjmkR0gT52dCES44BvQear/P7IMwmX3PZFQaM1bdelfJa173uGcaKffu7Lacovrs6S0BhLts3ZFyV13aDqOp3FGAhtj+9mpvmslDsPfi0cxpG60VjnkTv/46arO3wD3xRuC/0vG44AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Change Github Theme\"\n        title=\"Change Github Theme\"\n        src=\"/static/606b1ff85d16998b0b59c3bb151c7997/00d43/fig2.png\"\n        srcset=\"/static/606b1ff85d16998b0b59c3bb151c7997/63868/fig2.png 250w,\n/static/606b1ff85d16998b0b59c3bb151c7997/0b533/fig2.png 500w,\n/static/606b1ff85d16998b0b59c3bb151c7997/00d43/fig2.png 1000w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Then after about 10 seconds, the website is online, perfectly. With all the fonts, style, assets, url, image included. It looks good, much better than my last time next.js development experience.</p>\n<p>For now, the first milestone has reached. In the future I can constantly update this blog, learn how to improve SEO, how to add features, how to created css animation, etc.</p>\n<p>In the future, the steps to update notes are:</p>\n<ol>\n<li>Open the project with vscode, run <code class=\"language-text\">gatsby develop</code></li>\n<li>I can review the result on localhost:8000</li>\n<li>After writing, run <code class=\"language-text\">npm run develop</code></li>\n<li>Push the code to github, run 'git add .', <code class=\"language-text\">git commit -m \"Update\"</code>, and <code class=\"language-text\">git push origin source</code></li>\n</ol>","frontmatter":{"date":"June 28, 2020","slug":"/notes/Deploy-Gatsby-to-Github-User-Page","title":"Deploy Gatsby to Github User Page","tags":["gatsby","Github"],"abstract":"After sometime of development, I now finished a basic version of note. So then I want to deploy it on my github, I like the idea that using XXXX.github.io for domain name, which looks even better than using a bought domain. So I need to find out how to do it"}}},"pageContext":{"slug":"/notes/Deploy-Gatsby-to-Github-User-Page"}},
    "staticQueryHashes": ["63159454"]}